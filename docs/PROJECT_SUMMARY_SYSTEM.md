# üìä –°–∏—Å—Ç–µ–º–∞ "–ü—ñ–¥—Å—É–º–æ–∫ –ø—Ä–æ–µ–∫—Ç—É" - –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**–í–µ—Ä—Å—ñ—è:** 1.0  
**–î–∞—Ç–∞:** 18 –∂–æ–≤—Ç–Ω—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** ProGran3 Plugin for SketchUp

---

## üìë –ó–ú–Ü–°–¢

1. [–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏](#–æ–≥–ª—è–¥-—Å–∏—Å—Ç–µ–º–∏)
2. [–ö–ª—é—á–æ–≤—ñ –ø–∞—Ç–µ—Ä–Ω–∏](#–∫–ª—é—á–æ–≤—ñ-–ø–∞—Ç–µ—Ä–Ω–∏)
3. [–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –æ–¥–∏–Ω–∏—Ü—å](#–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è-–æ–¥–∏–Ω–∏—Ü—å)
4. [–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–ª–æ—â—ñ](#—Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫-–ø–ª–æ—â—ñ)
5. [–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ–±'—î–º—É](#—Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫-–æ–±—î–º—É)
6. [–†–æ–±–æ—Ç–∞ –∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏](#—Ä–æ–±–æ—Ç–∞-–∑-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏)
7. [–¢–∏–ø–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤](#—Ç–∏–ø–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤)
8. [–ì—Ä—É–øÔøΩÔøΩÔøΩ–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö](#–≥—Ä—É–ø—É–≤–∞–Ω–Ω—è-–¥–∞–Ω–∏—Ö)
9. [–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ UI](#–≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è-–≤-ui)
10. [–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏](#–ø—Ä–∞–∫—Ç–∏—á–Ω—ñ-–ø—Ä–∏–∫–ª–∞–¥–∏)

---

## üéØ –û–ì–õ–Ø–î –°–ò–°–¢–ï–ú–ò

### –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ "–ü—ñ–¥—Å—É–º–æ–∫ –ø—Ä–æ–µ–∫—Ç—É" –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∞–Ω–∞–ª—ñ–∑—É—î SketchUp –º–æ–¥–µ–ª—å —Ç–∞ –≥–µ–Ω–µ—Ä—É—î –¥–µ—Ç–∞–ª—å–Ω—É —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –∑ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–º:
- –†–æ–∑–º—ñ—Ä—ñ–≤ —É —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö
- –ü–ª–æ—â—ñ –≤–µ—Ä—Ö–Ω—ñ—Ö/–Ω–∞–π–±—ñ–ª—å—à–∏—Ö –≥—Ä–∞–Ω–µ–π —É –º¬≤
- –û–±'—î–º—É —É –º¬≥
- –ö—ñ–ª—å–∫–æ—Å—Ç—ñ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- –ó–∞–≥–∞–ª—å–Ω–∏—Ö —Å—É–º

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
Ruby Backend (callback_manager.rb)
  ‚Üì –ó–±—ñ—Ä –¥–∞–Ω–∏—Ö –∑ –º–æ–¥–µ–ª—ñ
  ‚Üì –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–ª–æ—â —Ç–∞ –æ–±'—î–º—ñ–≤
  ‚Üì –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ç–∏–ø–∞–º–∏
  ‚Üì JSON serialization
  ‚Üì
JavaScript Frontend (SummaryTable.js)
  ‚Üì –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏
  ‚Üì –ê–≥—Ä–µ–≥–∞—Ü—ñ—è —Å—É–º
  ‚Üì –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
  ‚Üì
HTML Display (index.html)
  ‚Üì –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ —Ç–∞–±–ª–∏—Ü—ñ
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

**Backend (Ruby):**
- `get_detailed_summary_callback()` - –≥–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –∑–±–æ—Ä—É
- –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- Helper —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ —Ç–∞ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è

**Frontend (JavaScript):**
- `refreshDetailedSummary()` - —ñ–Ω—ñ—Ü—ñ—é—î –∑–∞–ø–∏—Ç
- `updateDetailedSummary(data)` - –æ–±—Ä–æ–±–ª—è—î –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ
- –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É

---

## üîë –ö–õ–Æ–ß–û–í–Ü –ü–ê–¢–ï–†–ù–ò

### –ü–∞—Ç–µ—Ä–Ω 1: –ü—Ä–æ—Å—Ç–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Foundation, Stand)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –û–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –º–æ–¥–µ–ª—å
- –ü—Ä—è–º—ñ –≥—Ä–∞–Ω—ñ (–∫—É–±/–ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥)
- –ü–ª–æ—â–∞ = –≤–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å
- –û–±'—î–º = bounds

**Ruby –∫–æ–¥:**
```ruby
when "Foundation"
  bounds = component.bounds
  trans = component.transformation
  
  # 1. –†–æ–∑–º—ñ—Ä–∏ –≤ —Å–º
  width_cm = (bounds.width.to_mm / 10.0).round(1)
  depth_cm = (bounds.depth.to_mm / 10.0).round(1)
  height_cm = (bounds.height.to_mm / 10.0).round(1)
  
  # 2. –ü–ª–æ—â–∞ –≤–µ—Ä—Ö–Ω—å–æ—ó –≥—Ä–∞–Ω—ñ
  scale_x = trans.xscale
  scale_y = trans.yscale
  
  top_area = 0
  component.definition.entities.grep(Sketchup::Face).each do |face|
    if face.normal.z > 0.9  # –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å (–Ω–æ—Ä–º–∞–ª—å –≤–≥–æ—Ä—É)
      top_area += face.area * scale_x * scale_y
    end
  end
  area_m2 = (top_area / 1550.0031).round(2)
  
  # 3. –û–±'—î–º
  volume_cu_inches = bounds.width * bounds.depth * bounds.height
  volume_m3 = (volume_cu_inches * 0.000016387064).round(3)
  
  # 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è item
  item = {
    name: name,
    width: width_cm,
    depth: depth_cm,
    height: height_cm,
    area_m2: area_m2,
    volume_m3: volume_m3,
    material: get_component_material(component)
  }
  summary[:foundation] << item
```

---

### –ü–∞—Ç–µ—Ä–Ω 2: –†–∞–º–∫–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (BlindArea)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –†–∞–º–∫–∞ –Ω–∞–≤–∫–æ–ª–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç—É
- –ú–æ–∂–µ –º–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏/–≥—Ä—É–ø–∏
- –ü–ª–æ—â–∞ = —Å—É–º–∞ –≤—Å—ñ—Ö –≤–µ—Ä—Ö–Ω—ñ—Ö –≥—Ä–∞–Ω–µ–π (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)
- –û–±'—î–º = –ø–ª–æ—â–∞ √ó —Ç–æ–≤—â–∏–Ω–∞ (–Ω–µ bounds!)

**Ruby –∫–æ–¥:**
```ruby
when /BlindArea/
  bounds = component.bounds
  trans = component.transformation
  
  # –†–æ–∑–º—ñ—Ä–∏
  width_cm = (bounds.width.to_mm / 10.0).round(1)
  depth_cm = (bounds.depth.to_mm / 10.0).round(1)
  height_cm = (bounds.height.to_mm / 10.0).round(1)
  
  # –†–ï–ö–£–†–°–ò–í–ù–ò–ô –ø–æ—à—É–∫ –≥—Ä–∞–Ω–µ–π
  top_area = 0
  
  process_entities = lambda do |entities, transformation|
    entities.each do |entity|
      if entity.is_a?(Sketchup::Face)
        normal = entity.normal.transform(transformation)
        
        if normal.z > 0.9  # –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å
          sx = transformation.xscale
          sy = transformation.yscale
          face_area = entity.area * sx * sy
          top_area += face_area
        end
        
      elsif entity.is_a?(Sketchup::ComponentInstance) || entity.is_a?(Sketchup::Group)
        # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∑–∞—Ö–æ–¥–∏–º–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—É
        new_trans = transformation * entity.transformation
        process_entities.call(entity.definition.entities, new_trans)
      end
    end
  end
  
  # –ó–∞–ø—É—Å–∫ —Ä–µ–∫—É—Ä—Å—ñ—ó
  process_entities.call(component.definition.entities, component.transformation)
  
  area_m2 = (top_area / 1550.0031).round(2)
  
  # –û–±'—î–º = –ø–ª–æ—â–∞ √ó —Ç–æ–≤—â–∏–Ω–∞ (–Ω–∞–π–º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä)
  thickness_mm = [bounds.width.to_mm, bounds.depth.to_mm, bounds.height.to_mm].min
  thickness_m = thickness_mm / 1000.0
  volume_m3 = (area_m2 * thickness_m).round(3)
```

**–ß–æ–º—É –ù–ï bounds –¥–ª—è –æ–±'—î–º—É:**
- `bounds.width √ó bounds.depth √ó bounds.height` = –æ–±'—î–º –∑ –¥—ñ—Ä–æ—é ‚ùå
- `–ø–ª–æ—â–∞_–≤–µ—Ä—Ö—É √ó —Ç–æ–≤—â–∏–Ω–∞` = —Ä–µ–∞–ª—å–Ω–∏–π –æ–±'—î–º –º–∞—Ç–µ—Ä—ñ–∞–ª—É ‚úÖ

---

### –ü–∞—Ç–µ—Ä–Ω 3: –ú–Ω–æ–∂–∏–Ω–Ω—ñ –æ–∫—Ä–µ–º—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (Tiles, Cladding)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ë–∞–≥–∞—Ç–æ –æ–∫—Ä–µ–º–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- –ú–æ–∂—É—Ç—å –±—É—Ç–∏ —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤
- –ü–æ—Ç—Ä—ñ–±–Ω–æ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏
- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –ø–ª–æ—â —Ç–∞ –æ–±'—î–º—ñ–≤

**Ruby –∫–æ–¥:**
```ruby
when /Perimeter_Tile|Modular_Tile/
  # –ö–æ–∂–Ω–∞ –ø–ª–∏—Ç–∫–∞ - –æ–∫—Ä–µ–º–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  bounds = component.bounds
  trans = component.transformation
  
  # –†–æ–∑–º—ñ—Ä–∏
  width_cm = (bounds.width.to_mm / 10.0).round(1)
  depth_cm = (bounds.depth.to_mm / 10.0).round(1)
  height_cm = (bounds.height.to_mm / 10.0).round(1)
  
  # –ü–ª–æ—â–∞ –≤–µ—Ä—Ö–Ω—å–æ—ó –≥—Ä–∞–Ω—ñ
  scale_x = trans.xscale
  scale_y = trans.yscale
  
  top_area = 0
  component.definition.entities.grep(Sketchup::Face).each do |face|
    if face.normal.z > 0.9
      top_area += face.area * scale_x * scale_y
    end
  end
  area_m2 = (top_area / 1550.0031).round(3)
  
  # –û–±'—î–º
  volume_cu_inches = bounds.width * bounds.depth * bounds.height
  volume_m3 = (volume_cu_inches * 0.000016387064).round(4)
  
  item = {
    name: name,
    width: width_cm,
    depth: depth_cm,
    height: height_cm,
    area_m2: area_m2,
    volume_m3: volume_m3,
    material: get_component_material(component)
  }
  summary[:tiles] << item
```

**JavaScript –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è:**
```javascript
// –ì—Ä—É–ø—É—î–º–æ –ø–ª–∏—Ç–∫–∏ –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏
const grouped = {};

data.tiles.forEach(tile => {
  const key = `${tile.depth}√ó${tile.width}√ó${tile.height}`;
  
  if (!grouped[key]) {
    grouped[key] = {
      depth: tile.depth,
      width: tile.width,
      height: tile.height,
      count: 0,
      totalArea: 0,
      totalVolume: 0
    };
  }
  
  grouped[key].count++;
  grouped[key].totalArea += (tile.area_m2 || 0);
  grouped[key].totalVolume += (tile.volume_m3 || 0);
});

// –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
Object.values(grouped).forEach(group => {
  console.log(`–ü–ª–∏—Ç–∫–∞ ${group.depth}√ó${group.width}√ó${group.height} —Å–º - ${group.count} —à—Ç`);
  console.log(`  –ü–ª–æ—â–∞: ${group.totalArea.toFixed(3)} –º¬≤`);
  console.log(`  –û–±'—î–º: ${group.totalVolume.toFixed(4)} –º¬≥`);
});
```

---

### –ü–∞—Ç–µ—Ä–Ω 4: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (Cladding)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è
- –ü–ª–æ—â–∞ = –Ω–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å (–Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –≤–µ—Ä—Ö–Ω—è!)
- –ü–æ—Ç—Ä—ñ–±–µ–Ω –∞–Ω–∞–ª—ñ–∑ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—ó –∫–æ–∂–Ω–æ—ó –≥—Ä–∞–Ω—ñ

**Ruby –∫–æ–¥:**
```ruby
when /Cladding/
  bounds = component.bounds
  trans = component.transformation
  
  scale_x = trans.xscale
  scale_y = trans.yscale
  scale_z = trans.zscale
  
  # –®—É–∫–∞—î–º–æ –ù–ê–ô–ë–Ü–õ–¨–®–£ –≥—Ä–∞–Ω—å (–Ω–µ —Ç—ñ–ª—å–∫–∏ –≤–µ—Ä—Ö–Ω—é)
  max_area = 0
  
  component.definition.entities.grep(Sketchup::Face).each do |face|
    normal = face.normal.transform(trans)
    
    # –ü–ª–æ—â–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—ó
    if normal.z.abs > 0.9  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ (XY –ø–ª–æ—â–∏–Ω–∞)
      face_area = face.area * scale_x * scale_y
    elsif normal.x.abs > 0.9  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ (YZ –ø–ª–æ—â–∏–Ω–∞)
      face_area = face.area * scale_y * scale_z
    elsif normal.y.abs > 0.9  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ (XZ –ø–ª–æ—â–∏–Ω–∞)
      face_area = face.area * scale_x * scale_z
    else
      # –ü–æ—Ö–∏–ª–∞ –≥—Ä–∞–Ω—å
      avg_scale = Math.sqrt(scale_x * scale_y * scale_z)
      face_area = face.area * avg_scale * avg_scale
    end
    
    max_area = face_area if face_area > max_area
  end
  
  area_m2 = (max_area / 1550.0031).round(3)
  
  # –ü–æ–∑–Ω–∞—á–∞—î–º–æ —è–∫ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É
  item = {
    # ... —ñ–Ω—à—ñ –ø–æ–ª—è ...
    area_m2: area_m2,
    tile_type: "–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞"
  }
```

---

### –ü–∞—Ç–µ—Ä–Ω 5: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (Flowerbed, CornerFence)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –í—Å–µ—Ä–µ–¥–∏–Ω—ñ 2-3+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
- –ù–ï –ø–æ–∫–∞–∑—É—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Ç—ñ–ª—å–∫–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ
- –ö–æ–∂–µ–Ω –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ

**Ruby –∫–æ–¥:**
```ruby
when /flowerbed/i
  # –ö–≤—ñ—Ç–Ω–∏–∫ –º—ñ—Å—Ç–∏—Ç—å –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
  internal_components = component.definition.entities.grep(Sketchup::ComponentInstance)
  
  # –û–±—Ä–æ–±–ª—è—î–º–æ –¢–Ü–õ–¨–ö–ò –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ (–Ω–µ —Å–∞–º –∫–≤—ñ—Ç–Ω–∏–∫)
  internal_components.each do |internal|
    bounds = internal.bounds
    
    # –í–ê–ñ–õ–ò–í–û: –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä * –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π)
    combined_trans = component.transformation * internal.transformation
    
    # –†–æ–∑–º—ñ—Ä–∏
    width_cm = (bounds.width.to_mm / 10.0).round(1)
    depth_cm = (bounds.depth.to_mm / 10.0).round(1)
    height_cm = (bounds.height.to_mm / 10.0).round(1)
    
    # –ü–ª–æ—â–∞ (–∑ –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–æ—é —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é)
    scale_x = combined_trans.xscale
    scale_y = combined_trans.yscale
    
    top_area = 0
    internal.definition.entities.grep(Sketchup::Face).each do |face|
      if face.normal.z > 0.9
        top_area += face.area * scale_x * scale_y
      end
    end
    area_m2 = (top_area / 1550.0031).round(3)
    
    # –û–±'—î–º (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –≤—Å—ñ—Ö scale)
    volume_cu_inches = bounds.width * bounds.depth * bounds.height * 
                       scale_x * scale_y * combined_trans.zscale
    volume_m3 = (volume_cu_inches * 0.000016387064).round(4)
    
    item = {
      name: internal.definition.name,  # –ù–∞–∑–≤–∞ –í–ù–£–¢–†–Ü–®–ù–¨–û–ì–û –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
      width: width_cm,
      depth: depth_cm,
      height: height_cm,
      area_m2: area_m2,
      volume_m3: volume_m3,
      material: get_component_material(internal)
    }
    summary[:flowerbeds] << item
  end
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```
flowerbed_100x50x10.skp (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) - –ù–ï –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
  ‚îú‚îÄ soil_component (–≥—Ä—É–Ω—Ç) ‚Üí –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
  ‚îú‚îÄ plant_component (—Ä–æ—Å–ª–∏–Ω–∞) ‚Üí –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
  ‚îî‚îÄ border_component (–±–æ—Ä–¥—é—Ä) ‚Üí –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
```

---

### –ü–∞—Ç–µ—Ä–Ω 6: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ —Ç–∏–ø–∞–º–∏ (Stand + StandGaps)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –û–¥–∏–Ω —Ç–∏–ø –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∞–ª–µ —Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–æ–∑–Ω–∞—á–∫–∞ —Ç–∏–ø—É
- –ü–æ–∫–∞–∑—É—é—Ç—å—Å—è –æ–±–∏–¥–≤–∞

**Ruby –∫–æ–¥:**
```ruby
when /stand/i
  bounds = component.bounds
  trans = component.transformation
  
  # ... —Ä–æ–∑–º—ñ—Ä–∏, –ø–ª–æ—â–∞, –æ–±'—î–º ...
  
  # –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ç–∏–ø
  is_gaps = name =~ /StandGaps/i
  stand_type = is_gaps ? "–ø—Ä–æ–º—ñ–∂–Ω–∞" : "–æ—Å–Ω–æ–≤–Ω–∞"
  
  item = {
    # ... —ñ–Ω—à—ñ –ø–æ–ª—è ...
    stand_type: stand_type  # –î–æ–¥–∞—Ç–∫–æ–≤–µ –ø–æ–ª–µ!
  }
```

**JavaScript –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```javascript
const standType = stand.stand_type === '–ø—Ä–æ–º—ñ–∂–Ω–∞' ? '–ü—Ä–æ–º—ñ–∂–Ω–∞ –¥–µ—Ç–∞–ª—å' : '–ü—ñ–¥—Å—Ç–∞–≤–∫–∞';

return `${standType}: ${stand.depth} √ó ${stand.width} √ó ${stand.height} —Å–º
  –ü–ª–æ—â–∞: ${area} –º¬≤
  –û–±'—î–º: ${volume} –º¬≥`;
```

---

## üîÑ –ö–û–ù–í–ï–†–¢–ê–¶–Ü–Ø –û–î–ò–ù–ò–¶–¨

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–û!

**SketchUp –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –æ–¥–∏–Ω–∏—Ü—ñ:**
- –î–æ–≤–∂–∏–Ω–∞: **–¥—é–π–º–∏ (inches)**
- –ü–ª–æ—â–∞: **–∫–≤–∞–¥—Ä–∞—Ç–Ω—ñ –¥—é–π–º–∏ (square inches)**
- –û–±'—î–º: **–∫—É–±—ñ—á–Ω—ñ –¥—é–π–º–∏ (cubic inches)**

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó

```ruby
# === –î–û–í–ñ–ò–ù–ê ===
INCH_TO_MM = 25.4
INCH_TO_CM = 2.54
INCH_TO_M = 0.0254

# === –ü–õ–û–©–ê ===
SQ_INCH_TO_MM2 = 645.16
SQ_INCH_TO_CM2 = 6.4516
SQ_INCH_TO_M2 = 0.00064516
M2_TO_SQ_INCH = 1550.0031

# === –û–ë'–Ñ–ú ===
CU_INCH_TO_MM3 = 16387.064
CU_INCH_TO_CM3 = 16.387064
CU_INCH_TO_M3 = 0.000016387064
M3_TO_CU_INCH = 61023.7441
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è

```ruby
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
width_cm = bounds.width / 10.0  # –î—ñ–ª–∏—Ç—å –¥—é–π–º–∏ –Ω–∞ 10!

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
width_cm = (bounds.width.to_mm / 10.0).round(1)  # –î—é–π–º–∏ ‚Üí –º–º ‚Üí —Å–º

# –†–æ–∑–±–∏–≤–∫–∞:
# bounds.width = 78.74 inches (–ø—Ä–∏–∫–ª–∞–¥)
# .to_mm = 78.74 * 25.4 = 2000 mm
# / 10.0 = 200 cm
# .round(1) = 200.0 cm
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó

```ruby
# === –î–û–í–ñ–ò–ù–ê ===
length_inches = 100.0
length_mm = length_inches.to_mm          # 2540.0 –º–º
length_cm = (length_inches.to_mm / 10)   # 254.0 —Å–º
length_m = (length_inches.to_mm / 1000)  # 2.54 –º

# === –ü–õ–û–©–ê ===
area_sq_inches = 310.0
area_m2 = area_sq_inches / 1550.0031     # 0.20 –º¬≤
area_cm2 = area_sq_inches * 6.4516       # 2000 —Å–º¬≤

# === –û–ë'–Ñ–ú ===
volume_cu_inches = 61.02
volume_m3 = volume_cu_inches * 0.000016387064  # 0.001 –º¬≥
volume_liters = volume_cu_inches * 0.016387064 # 1.0 –ª
```

---

## üìè –†–û–ó–†–ê–•–£–ù–û–ö –ü–õ–û–©–Ü

### –ú–µ—Ç–æ–¥ 1: –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:** Foundation, Tiles, Stand, BlindArea

```ruby
def calculate_top_area(component)
  trans = component.transformation
  scale_x = trans.xscale
  scale_y = trans.yscale
  
  top_area = 0
  
  component.definition.entities.grep(Sketchup::Face).each do |face|
    if face.normal.z > 0.9  # –ù–æ—Ä–º–∞–ª—å –≤–≥–æ—Ä—É (vertical tolerance 0.9)
      # ‚úÖ –í–ê–ñ–õ–ò–í–û: –≤—Ä–∞—Ö–æ–≤—É—î–º–æ –º–∞—Å—à—Ç–∞–±!
      face_area = face.area * scale_x * scale_y
      top_area += face_area
    end
  end
  
  # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è: sq_inches ‚Üí –º¬≤
  area_m2 = (top_area / 1550.0031).round(2)
  
  area_m2
end
```

**–ß–æ–º—É `face.normal.z > 0.9` –∞ –Ω–µ `== 1.0`:**
- –ì—Ä–∞–Ω—å –º–æ–∂–µ –±—É—Ç–∏ —Ç—Ä–æ—Ö–∏ –Ω–∞—Ö–∏–ª–µ–Ω–∞ (–ø–æ—Ö–∏–±–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è)
- 0.9 –æ–∑–Ω–∞—á–∞—î –∫—É—Ç ~25¬∞ –≤—ñ–¥ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ (–¥–æ—Å—Ç–∞—Ç–Ω—è —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ñ—Å—Ç—å)

---

### –ú–µ—Ç–æ–¥ 2: –ù–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ/–¥–æ–≤—ñ–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:** Cladding, FenceCorner, –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏

```ruby
def calculate_max_face_area(component)
  trans = component.transformation
  scale_x = trans.xscale
  scale_y = trans.yscale
  scale_z = trans.zscale
  
  max_area = 0
  
  component.definition.entities.grep(Sketchup::Face).each do |face|
    normal = face.normal.transform(trans)
    
    # –ü–ª–æ—â–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—ó –≥—Ä–∞–Ω—ñ
    if normal.z.abs > 0.9  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ (XY –ø–ª–æ—â–∏–Ω–∞)
      face_area = face.area * scale_x * scale_y
      
    elsif normal.x.abs > 0.9  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ YZ
      face_area = face.area * scale_y * scale_z
      
    elsif normal.y.abs > 0.9  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ XZ
      face_area = face.area * scale_x * scale_z
      
    else  # –ü–æ—Ö–∏–ª–∞ –≥—Ä–∞–Ω—å
      # –ü—Ä–∏–±–ª–∏–∑–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫
      avg_scale = Math.sqrt(scale_x * scale_y * scale_z)
      face_area = face.area * avg_scale * avg_scale
    end
    
    # –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω–∞–π–±—ñ–ª—å—à—É
    max_area = face_area if face_area > max_area
  end
  
  area_m2 = (max_area / 1550.0031).round(3)
  
  area_m2
end
```

**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
- –ù–µ –∑–Ω–∞—î—Ç–µ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–ª–æ—â–∞ "–ª–∏—Ü—å–æ–≤–æ—ó" —Å—Ç–æ—Ä–æ–Ω–∏
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ –æ–±–ª–∏—Ü—é–≤–∞–Ω–Ω—è
- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏

---

### –ú–µ—Ç–æ–¥ 3: –†–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π –ø–æ—à—É–∫ (—Å–∫–ª–∞–¥–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏)

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:** BlindArea (—Ä–∞–º–∫–∞ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏)

```ruby
def calculate_area_recursive(component)
  top_area = 0
  
  # –õ—è–º–±–¥–∞ –¥–ª—è —Ä–µ–∫—É—Ä—Å—ñ—ó
  process_entities = lambda do |entities, transformation|
    entities.each do |entity|
      
      if entity.is_a?(Sketchup::Face)
        # –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–∞ –Ω–æ—Ä–º–∞–ª—å
        normal = entity.normal.transform(transformation)
        
        if normal.z > 0.9  # –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å
          sx = transformation.xscale
          sy = transformation.yscale
          face_area = entity.area * sx * sy
          top_area += face_area
        end
        
      elsif entity.is_a?(Sketchup::ComponentInstance) || entity.is_a?(Sketchup::Group)
        # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–æ–±–ª—è—î–º–æ –≤–∫–ª–∞–¥–µ–Ω—ñ
        new_trans = transformation * entity.transformation
        process_entities.call(entity.definition.entities, new_trans)
      end
      
    end
  end
  
  # –ó–∞–ø—É—Å–∫ —Ä–µ–∫—É—Ä—Å—ñ—ó
  process_entities.call(
    component.definition.entities, 
    component.transformation
  )
  
  area_m2 = (top_area / 1550.0031).round(2)
  
  area_m2
end
```

**–ß–æ–º—É —Ä–µ–∫—É—Ä—Å—ñ—è:**
- –ì—Ä–∞–Ω—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤ Groups –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ú–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω—ñ ComponentInstance
- –ö–æ–∂–µ–Ω —Ä—ñ–≤–µ–Ω—å –º–∞—î —Å–≤–æ—é —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é
- –¢—Ä–µ–±–∞ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –≤—Å—ñ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó: `parent * child`

---

## üì¶ –†–û–ó–†–ê–•–£–ù–û–ö –û–ë'–Ñ–ú–£

### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ Bounds (—Å—É—Ü—ñ–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:** Foundation, Stand, Tiles, Steles

```ruby
def calculate_volume_simple(component)
  bounds = component.bounds
  
  # –û–±'—î–º bounds (–ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–π –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥)
  volume_cu_inches = bounds.width * bounds.depth * bounds.height
  
  # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è: cu_inches ‚Üí –º¬≥
  volume_m3 = (volume_cu_inches * 0.000016387064).round(3)
  
  volume_m3
end
```

**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—É—Ü—ñ–ª—å–Ω–∏–π (–Ω–µ —Ä–∞–º–∫–∞)
- –§–æ—Ä–º–∞ –±–ª–∏–∑—å–∫–∞ –¥–æ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞
- –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å

---

### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ –ø–ª–æ—â—É √ó —Ç–æ–≤—â–∏–Ω—É (—Ä–∞–º–∫–æ–≤—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏)

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:** BlindArea (–≤—ñ–¥–º–æ—Å—Ç–∫–∞)

```ruby
def calculate_volume_frame(component, area_m2)
  bounds = component.bounds
  
  # –¢–æ–≤—â–∏–Ω–∞ = –Ω–∞–π–º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä
  thickness_mm = [bounds.width.to_mm, bounds.depth.to_mm, bounds.height.to_mm].min
  thickness_m = thickness_mm / 1000.0
  
  # –û–±'—î–º = –ø–ª–æ—â–∞ √ó —Ç–æ–≤—â–∏–Ω–∞
  volume_m3 = (area_m2 * thickness_m).round(3)
  
  volume_m3
end
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```
BlindArea (—Ä–∞–º–∫–∞):
  Bounds: 260 √ó 5 √ó 160 —Å–º
  
‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
  volume = 260 √ó 5 √ó 160 = 208000 —Å–º¬≥ = 0.208 –º¬≥
  (–≤–∫–ª—é—á–∞—î –ø–æ—Ä–æ–∂–Ω—é —á–∞—Å—Ç–∏–Ω—É –ø–æ—Å–µ—Ä–µ–¥–∏–Ω—ñ!)

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
  area_top = 2.16 –º¬≤ (—Ä–µ–∞–ª—å–Ω–∞ –ø–ª–æ—â–∞ —Ä–∞–º–∫–∏)
  thickness = 5 —Å–º = 0.05 –º
  volume = 2.16 √ó 0.05 = 0.108 –º¬≥
```

---

### –ú–µ—Ç–æ–¥ 3: –ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é (–≤–∫–ª–∞–¥–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)

**–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:** –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (Flowerbed internals, CornerFence parts)

```ruby
def calculate_volume_nested(component, parent_trans)
  bounds = component.bounds
  
  # –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è
  combined_trans = parent_trans * component.transformation
  
  scale_x = combined_trans.xscale
  scale_y = combined_trans.yscale
  scale_z = combined_trans.zscale
  
  # –û–±'—î–º –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –≤—Å—ñ—Ö –º–∞—Å—à—Ç–∞–±—ñ–≤
  volume_cu_inches = bounds.width * bounds.depth * bounds.height * 
                     scale_x * scale_y * scale_z
  
  volume_m3 = (volume_cu_inches * 0.000016387064).round(4)
  
  volume_m3
end
```

**–ß–æ–º—É —Ç—Ä–µ–±–∞ scale_x * scale_y * scale_z:**
- `bounds` –¥–∞—î —Ä–æ–∑–º—ñ—Ä–∏ –ë–ï–ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- –Ø–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–π - —Ç—Ä–µ–±–∞ –≤—Ä–∞—Ö—É–≤–∞—Ç–∏
- –í–∫–ª–∞–¥–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –º–∞—é—Ç—å –ø–æ–¥–≤—ñ–π–Ω—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é!

---

## üîß –†–û–ë–û–¢–ê –ó –ö–û–ú–ü–û–ù–ï–ù–¢–ê–ú–ò

### –ü–æ—à—É–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

```ruby
# –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤ –º–æ–¥–µ–ª—ñ
model = Sketchup.active_model
all_components = model.active_entities.grep(Sketchup::ComponentInstance)

# –ó–∞ —Ç–æ—á–Ω–æ—é –Ω–∞–∑–≤–æ—é
foundation = all_components.find { |c| c.definition.name == "Foundation" }

# –ó–∞ regex
tiles = all_components.select { |c| c.definition.name =~ /Modular_Tile|Perimeter_Tile/ }

# –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
internal = component.definition.entities.grep(Sketchup::ComponentInstance)
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π

```ruby
component = model.selection.first

# –ù–∞–∑–≤–∞
name = component.definition.name

# –ì–∞–±–∞—Ä–∏—Ç–∏ (–∑ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é)
bounds = component.bounds
width = bounds.width    # –î—é–π–º–∏
depth = bounds.depth
height = bounds.height

# –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è
trans = component.transformation
scale_x = trans.xscale
scale_y = trans.yscale
scale_z = trans.zscale
origin = trans.origin  # Point3d

# –ì–µ–æ–º–µ—Ç—Ä—ñ—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ
entities = component.definition.entities
faces = entities.grep(Sketchup::Face)
internal_components = entities.grep(Sketchup::ComponentInstance)
groups = entities.grep(Sketchup::Group)

# –ú–∞—Ç–µ—Ä—ñ–∞–ª
material = component.material
material_name = material ? material.name : "–ë–µ–∑ –º–∞—Ç–µ—Ä—ñ–∞–ª—É"
```

### –†–æ–±–æ—Ç–∞ –∑ –≥—Ä–∞–Ω—è–º–∏

```ruby
# –í—Å—ñ –≥—Ä–∞–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
faces = component.definition.entities.grep(Sketchup::Face)

faces.each do |face|
  # –ù–æ—Ä–º–∞–ª—å (–Ω–∞–ø—Ä—è–º–æ–∫ –≥—Ä–∞–Ω—ñ)
  normal = face.normal  # Vector3d
  
  # –û—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è:
  # normal.z > 0.9  ‚Üí –≤–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞, –≤–≥–æ—Ä—É)
  # normal.z < -0.9 ‚Üí –Ω–∏–∂–Ω—è –≥—Ä–∞–Ω—å (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞, –≤–Ω–∏–∑)
  # normal.x.abs > 0.9 ‚Üí –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ YZ)
  # normal.y.abs > 0.9 ‚Üí –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ XZ)
  
  # –ü–ª–æ—â–∞ –≥—Ä–∞–Ω—ñ (–ë–ï–ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó)
  area = face.area  # –ö–≤–∞–¥—Ä–∞—Ç–Ω—ñ –¥—é–π–º–∏
  
  # –ü–ª–æ—â–∞ –ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—ó)
  if normal.z.abs > 0.9
    face_area = area * trans.xscale * trans.yscale
  elsif normal.x.abs > 0.9
    face_area = area * trans.yscale * trans.zscale
  elsif normal.y.abs > 0.9
    face_area = area * trans.xscale * trans.zscale
  end
  
  # –í–µ—Ä—à–∏–Ω–∏ –≥—Ä–∞–Ω—ñ
  vertices = face.vertices  # Array of Vertex
  points = vertices.map(&:position)  # Array of Point3d
end
```

---

## üìã –¢–ò–ü–ò –ö–û–ú–ü–û–ù–ï–ù–¢–Ü–í

### 1. Foundation (–§—É–Ω–¥–∞–º–µ–Ω—Ç)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 1  
**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å  
**–û–±'—î–º:** Bounds

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–§—É–Ω–¥–∞–º–µ–Ω—Ç:    15 √ó 200 √ó 100 —Å–º
              –ü–ª–æ—â–∞: 2.00 –º¬≤
              –û–±'—î–º: 0.300 –º¬≥
```

---

### 2. BlindArea (–í—ñ–¥–º–æ—Å—Ç–∫–∞)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 1  
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –†–∞–º–∫–∞ (–º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏)  
**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –°—É–º–∞ –≤—Å—ñ—Ö –≤–µ—Ä—Ö–Ω—ñ—Ö –≥—Ä–∞–Ω–µ–π (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)  
**–û–±'—î–º:** –ü–ª–æ—â–∞ √ó —Ç–æ–≤—â–∏–Ω–∞ (–ù–ï bounds!)

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–í—ñ–¥–º–æ—Å—Ç–∫–∞:    5 √ó 260 √ó 160 —Å–º
              –ü–ª–æ—â–∞: 2.16 –º¬≤
              –û–±'—î–º: 0.108 –º¬≥
```

---

### 3. Tiles (–ü–ª–∏—Ç–∫–∞: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ + –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 5-20+ (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –º–æ–¥–µ–ª—ñ)  
**–¢–∏–ø–∏:**
- `Modular_Tile_*` - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ –ø–ª–∏—Ç–∫–∞ (–≤–µ—Ä—Ö —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç—É)
- `Cladding_*` - –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø–ª–∏—Ç–∫–∞ (–±–æ–∫–æ–≤—ñ —Å—Ç–æ—Ä–æ–Ω–∏)

**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** 
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞: –≤–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞: –Ω–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å

**–û–±'—î–º:** Bounds

**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è:** –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ + —Ç–∏–ø–æ–º

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–ü–ª–∏—Ç–∫–∞:       –ü–ª–∏—Ç–∫–∞ 3 √ó 80 √ó 40 —Å–º - 5 —à—Ç
                –ü–ª–æ—â–∞: 1.600 –º¬≤, –û–±'—î–º: 0.0048 –º¬≥
              
              –ü–ª–∏—Ç–∫–∞ 3 √ó 60 √ó 40 —Å–º - 2 —à—Ç
                –ü–ª–æ—â–∞: 0.480 –º¬≤, –û–±'—î–º: 0.0014 –º¬≥
              
              –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø–ª–∏—Ç–∫–∞ 3 √ó 200 √ó 100 —Å–º - 6 —à—Ç
                –ü–ª–æ—â–∞: 1.200 –º¬≤, –û–±'—î–º: 0.0036 –º¬≥
              
              –ó–ê–ì–ê–õ–û–ú:
                –ü–ª–æ—â–∞: 3.28 –º¬≤
                –û–±'—î–º: 0.010 –º¬≥
```

---

### 4. Stand (–ü—ñ–¥—Å—Ç–∞–≤–∫–∞ + –ü—Ä–æ–º—ñ–∂–Ω–∞)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 1-2  
**–¢–∏–ø–∏:**
- `Stand` - –æ—Å–Ω–æ–≤–Ω–∞ –ø—ñ–¥—Å—Ç–∞–≤–∫–∞
- `StandGaps` - –ø—Ä–æ–º—ñ–∂–Ω–∞ –¥–µ—Ç–∞–ª—å (—è–∫—â–æ —î)

**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å  
**–û–±'—î–º:** Bounds

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–ü—ñ–¥—Å—Ç–∞–≤–∫–∞:    –ü—ñ–¥—Å—Ç–∞–≤–∫–∞: 30 √ó 60 √ó 20 —Å–º
                –ü–ª–æ—â–∞: 0.180 –º¬≤
                –û–±'—î–º: 0.036 –º¬≥
              
              –ü—Ä–æ–º—ñ–∂–Ω–∞ –¥–µ—Ç–∞–ª—å: 10 √ó 10 √ó 5 —Å–º
                –ü–ª–æ—â–∞: 0.010 –º¬≤
                –û–±'—î–º: 0.0005 –º¬≥
```

---

### 5. Steles (–°—Ç–µ–ª–∏)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 1-2  
**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å  
**–û–±'—î–º:** Bounds  
**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è:** –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ (—è–∫—â–æ –ø–∞—Ä–Ω—ñ —Å—Ç–µ–ª–∏)

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–æ–¥–Ω–∞):**
```
–°—Ç–µ–ª–∞:        –°—Ç–µ–ª–∞ 8 √ó 100 √ó 50 —Å–º - 1 —à—Ç
                –ü–ª–æ—â–∞: 0.500 –º¬≤
                –û–±'—î–º: 0.040 –º¬≥
```

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–ø–∞—Ä–Ω—ñ):**
```
–°—Ç–µ–ª–∞:        –°—Ç–µ–ª–∞ 8 √ó 100 √ó 50 —Å–º - 2 —à—Ç
                –ü–ª–æ—â–∞: 1.000 –º¬≤
                –û–±'—î–º: 0.080 –º¬≥
```

---

### 6. Flowerbeds (–ö–≤—ñ—Ç–Ω–∏–∫–∏)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí 3 –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏  
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** `flowerbed_*.skp` –º—ñ—Å—Ç–∏—Ç—å 3 –æ–∫—Ä–µ–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏  
**–©–æ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è:** –¢–Ü–õ–¨–ö–ò 3 –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ (–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å (–∫–æ–∂–Ω–æ–≥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ)  
**–û–±'—î–º:** Bounds √ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  
**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è:** –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–ö–≤—ñ—Ç–Ω–∏–∫:      –ö–≤—ñ—Ç–Ω–∏–∫ 10 √ó 50 √ó 30 —Å–º - 2 —à—Ç
                –ü–ª–æ—â–∞: 0.030 –º¬≤
                –û–±'—î–º: 0.0030 –º¬≥
              
              –ö–≤—ñ—Ç–Ω–∏–∫ 10 √ó 30 √ó 20 —Å–º - 1 —à—Ç
                –ü–ª–æ—â–∞: 0.006 –º¬≤
                –û–±'—î–º: 0.0006 –º¬≥
              
              –ó–ê–ì–ê–õ–û–ú:
                –ü–ª–æ—â–∞: 0.04 –º¬≤
                –û–±'—î–º: 0.004 –º¬≥
```

---

### 7. CornerFence (–ö—É—Ç–æ–≤–∞ –æ–≥–æ—Ä–æ–∂–∞)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ ‚Üí 12 –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö (4√ó3)  
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ö–æ–∂–µ–Ω `CornerFence` –º—ñ—Å—Ç–∏—Ç—å:
- `CornerFence_Post` (—Å—Ç–æ–≤–ø—á–∏–∫)
- `CornerFence_Panel_X` (–ø–∞–Ω–µ–ª—å –ø–æ X)
- `CornerFence_Panel_Y` (–ø–∞–Ω–µ–ª—å –ø–æ Y)

**–©–æ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è:** –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è–º

**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –ù–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å  
**–û–±'—î–º:** Bounds √ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è  
**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è:** –ó–∞ –Ω–∞–∑–≤–æ—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–ö—É—Ç–æ–≤–∞ –æ–≥–æ—Ä–æ–∂–∞:   Post: 25 √ó 15 √ó 15 —Å–º - 4 —à—Ç
                    –ü–ª–æ—â–∞: 0.150 –º¬≤
                    –û–±'—î–º: 0.0224 –º¬≥
                  
                  Panel_X: 15 √ó 50 √ó 5 —Å–º - 4 —à—Ç
                    –ü–ª–æ—â–∞: 0.300 –º¬≤
                    –û–±'—î–º: 0.0150 –º¬≥
                  
                  Panel_Y: 15 √ó 5 √ó 50 —Å–º - 4 —à—Ç
                    –ü–ª–æ—â–∞: 0.300 –º¬≤
                    –û–±'—î–º: 0.0150 –º¬≥
                  
                  –ó–ê–ì–ê–õ–û–ú:
                    –ü–ª–æ—â–∞: 0.75 –º¬≤
                    –û–±'—î–º: 0.052 –º¬≥
```

---

### 8. Fence Decor (–î–µ–∫–æ—Ä –æ–≥–æ—Ä–æ–∂—ñ)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å:** 4+ (ball.skp, pancake.skp)  
**–†–æ–∑–º—ñ—Ä–∏:** Depth √ó Width √ó Height (—Å–º)  
**–ü–ª–æ—â–∞:** –ù–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å  
**–û–±'—î–º:** Bounds  
**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è:** –ó–∞ –Ω–∞–∑–≤–æ—é —Ñ–∞–π–ª—É

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```
–î–µ–∫–æ—Ä –æ–≥–æ—Ä–æ–∂—ñ:    ball.skp: 14.6 √ó 10 √ó 10 —Å–º - 4 —à—Ç
                    –ü–ª–æ—â–∞: 0.004 –º¬≤
                    –û–±'—î–º: 0.0058 –º¬≥
```

---

## üîÑ –ì–†–£–ü–£–í–ê–ù–ù–Ø –î–ê–ù–ò–•

### Ruby Backend –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è

**–ù–ï –≥—Ä—É–ø—É–≤–∞—Ç–∏ (–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ):**
```ruby
# Foundation, BlindArea, Stands, Tiles, Steles, Flowerbeds, FenceCorner, FenceDecor
if category == :foundation || category == :blind_area || category == :stands || 
   category == :tiles || category == :steles || category == :flowerbeds || 
   category == :fence_corner || category == :fence_decor
  grouped_summary[category] = items  # –ë–ï–ó –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è
else
  grouped_summary[category] = group_components(items)  # –ó –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è–º
end
```

**–ß–æ–º—É –ù–ï –≥—Ä—É–ø—É—î–º–æ:**
- –ú–∞—é—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è: `area_m2`, `volume_m3`, `tile_type`, `stand_type`
- –ü–æ—Ç—Ä—ñ–±–Ω–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ (–Ω–µ –∑–∞ –º–∞—Ç–µ—Ä—ñ–∞–ª–æ–º)
- JavaScript —Ä–æ–±–∏—Ç—å –≤–ª–∞—Å–Ω–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è

---

### JavaScript Frontend –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è

**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏:**
```javascript
const grouped = {};

data.tiles.forEach(tile => {
  // –ö–ª—é—á = —É–Ω—ñ–∫–∞–ª—å–Ω–∞ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä—ñ–≤
  const key = `${tile.depth}√ó${tile.width}√ó${tile.height}`;
  
  if (!grouped[key]) {
    grouped[key] = {
      depth: tile.depth,
      width: tile.width,
      height: tile.height,
      count: 0,           // –õ—ñ—á–∏–ª—å–Ω–∏–∫
      totalArea: 0,       // –°—É–º–∞ –ø–ª–æ—â
      totalVolume: 0      // –°—É–º–∞ –æ–±'—î–º—ñ–≤
    };
  }
  
  // –î–æ–¥–∞—î–º–æ –¥–æ –≥—Ä—É–ø–∏
  grouped[key].count++;
  grouped[key].totalArea += (tile.area_m2 || 0);
  grouped[key].totalVolume += (tile.volume_m3 || 0);
});

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// grouped = {
//   "3√ó80√ó40": { depth: 3, width: 80, height: 40, count: 5, totalArea: 1.6, totalVolume: 0.0048 },
//   "3√ó60√ó40": { depth: 3, width: 60, height: 40, count: 2, totalArea: 0.48, totalVolume: 0.0014 }
// }
```

**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ç–∏–ø–æ–º:**
```javascript
// –î–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º —Ç–∏–ø–æ–º (tile_type, stand_type)
const key = `${tile.depth}√ó${tile.width}√ó${tile.height}√ó${tile.tile_type || 'horizontal'}`;

// –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏:
// - –ü–ª–∏—Ç–∫–∞ 3√ó80√ó40 (horizontal)
// - –ü–ª–∏—Ç–∫–∞ 3√ó80√ó40 (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞)
```

**–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ –Ω–∞–∑–≤–æ—é:**
```javascript
// –î–ª—è CornerFence (Post, Panel_X, Panel_Y)
const key = item.name;  // "CornerFence_Post"

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ–∂–µ–Ω —Ç–∏–ø –æ–∫—Ä–µ–º–æ
// - CornerFence_Post: 4 —à—Ç
// - CornerFence_Panel_X: 4 —à—Ç
// - CornerFence_Panel_Y: 4 —à—Ç
```

---

## üñ•Ô∏è –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –í UI

### –§–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç—É

**–ë–∞–≥–∞—Ç–æ—Ä—è–¥–∫–æ–≤–∏–π (multiline):**
```javascript
const text = `${depth} √ó ${width} √ó ${height} —Å–º
–ü–ª–æ—â–∞: ${area} –º¬≤
–û–±'—î–º: ${volume} –º¬≥`;

// CSS –º–∞—î –º–∞—Ç–∏: white-space: pre-line
```

**–ó –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è–º:**
```javascript
const lines = [];

Object.values(grouped).forEach(group => {
  lines.push(
    `–ü–ª–∏—Ç–∫–∞ ${group.depth} √ó ${group.width} √ó ${group.height} —Å–º - ${group.count} —à—Ç\n` +
    `  –ü–ª–æ—â–∞: ${group.totalArea.toFixed(3)} –º¬≤, –û–±'—î–º: ${group.totalVolume.toFixed(4)} –º¬≥`
  );
});

lines.push(`\n–ó–ê–ì–ê–õ–û–ú:\n  –ü–ª–æ—â–∞: ${totalArea.toFixed(2)} –º¬≤\n  –û–±'—î–º: ${totalVolume.toFixed(3)} –º¬≥`);

const text = lines.join('\n\n');  // –ü–æ–¥–≤—ñ–π–Ω–∏–π –ø–µ—Ä–µ–Ω–æ—Å –º—ñ–∂ –≥—Ä—É–ø–∞–º–∏
```

### CSS —Å—Ç–∏–ª—ñ

```css
.summary-table {
  width: 100%;
  border-collapse: collapse;
}

.summary-table td:first-child {
  font-weight: 600;
  width: 35%;
  vertical-align: top;
  padding-right: 15px;
}

.summary-table td:last-child {
  text-align: left;
  vertical-align: top;
}

.summary-cell {
  white-space: pre-line;    /* ‚Üê –ó–±–µ—Ä—ñ–≥–∞—î \n */
  line-height: 1.8;         /* ‚Üê –ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å */
  font-size: 0.9em;
  max-width: 350px;
  word-wrap: break-word;
  vertical-align: top;
}
```

### –¢–æ—á–Ω—ñ—Å—Ç—å –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è

```javascript
// –†–æ–∑–º—ñ—Ä–∏ (—Å–º) - 1 –∑–Ω–∞–∫
${depth.toFixed(1)} —Å–º  // 15.0 —Å–º

// –ü–ª–æ—â–∞ (–º¬≤) - –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É
// –ú–∞–ª—ñ –ø–ª–æ—â—ñ (< 1 –º¬≤): 3 –∑–Ω–∞–∫–∏
${area.toFixed(3)} –º¬≤  // 0.320 –º¬≤

// –í–µ–ª–∏–∫—ñ –ø–ª–æ—â—ñ (> 1 –º¬≤): 2 –∑–Ω–∞–∫–∏
${totalArea.toFixed(2)} –º¬≤  // 2.16 –º¬≤

// –û–±'—î–º (–º¬≥) - –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É
// –ú–∞–ª—ñ –æ–±'—î–º–∏ (< 0.01 –º¬≥): 4 –∑–Ω–∞–∫–∏
${volume.toFixed(4)} –º¬≥  // 0.0015 –º¬≥

// –°–µ—Ä–µ–¥–Ω—ñ –æ–±'—î–º–∏ (< 1 –º¬≥): 3 –∑–Ω–∞–∫–∏
${totalVolume.toFixed(3)} –º¬≥  // 0.108 –º¬≥
```

---

## üí° –ü–†–ê–ö–¢–ò–ß–ù–Ü –ü–†–ò–ö–õ–ê–î–ò

### –ü—Ä–∏–∫–ª–∞–¥ 1: –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–∏–ø –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ó–∞–¥–∞—á–∞:** –î–æ–¥–∞—Ç–∏ "Lamp" (–ª–∞–º–ø–∞) –≤ –ø—ñ–¥—Å—É–º–æ–∫ –∑ –ø–ª–æ—â–µ—é —Ç–∞ –æ–±'—î–º–æ–º

**–ö—Ä–æ–∫ 1: Ruby (callback_manager.rb)**
```ruby
when /lamp/i
  ProGran3::Logger.info("üîπ –õ–∞–º–ø–∞ –∑–Ω–∞–π–¥–µ–Ω–∞: #{name}", "Summary")
  
  bounds = component.bounds
  trans = component.transformation
  
  # –†–æ–∑–º—ñ—Ä–∏
  width_cm = (bounds.width.to_mm / 10.0).round(1)
  depth_cm = (bounds.depth.to_mm / 10.0).round(1)
  height_cm = (bounds.height.to_mm / 10.0).round(1)
  
  # –ü–ª–æ—â–∞ (–Ω–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å - –ª–∞–º–ø–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞)
  max_area = 0
  # ... –∫–æ–¥ –∑ –ü–∞—Ç–µ—Ä–Ω 4 (Cladding) ...
  
  area_m2 = (max_area / 1550.0031).round(3)
  
  # –û–±'—î–º
  volume_cu_inches = bounds.width * bounds.depth * bounds.height
  volume_m3 = (volume_cu_inches * 0.000016387064).round(4)
  
  item = {
    name: name,
    width: width_cm,
    depth: depth_cm,
    height: height_cm,
    area_m2: area_m2,
    volume_m3: volume_m3,
    material: get_component_material(component)
  }
  summary[:lamps] << item
```

**–ö—Ä–æ–∫ 2: –î–æ–¥–∞—Ç–∏ –¥–æ –ù–ï–≥—Ä—É–ø–æ–≤–∞–Ω–∏—Ö**
```ruby
if category == :foundation || ... || category == :lamps
  grouped_summary[category] = items
```

**–ö—Ä–æ–∫ 3: JavaScript (SummaryTable.js)**
```javascript
// –û–Ω–æ–≤–ª—é—î–º–æ –õ–∞–º–ø–∏ (–≥—Ä—É–ø—É—î–º–æ –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏)
if (data.lamps && data.lamps.length > 0) {
  const lampEl = safeGetElement('summary-lamp');
  if (lampEl) {
    const grouped = {};
    
    data.lamps.forEach(lamp => {
      const key = `${lamp.depth}√ó${lamp.width}√ó${lamp.height}`;
      // ... –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è —è–∫ —É Tiles ...
    });
    
    // –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
    const lampLines = [];
    // ... —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —è–∫ —É Steles ...
    
    const text = lampLines.join('\n\n');
    safeSetTextContent(lampEl, text);
  }
}
```

**–ö—Ä–æ–∫ 4: HTML (index.html)**
```html
<tr>
  <td data-i18n="summary.lamp">–õ–∞–º–ø–∞:</td>
  <td id="summary-lamp" class="summary-cell">--</td>
</tr>
```

---

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ó–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è

**–ó–∞–¥–∞—á–∞:** –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø–ª–æ—â—É –≤ —Å–º¬≤ –∑–∞–º—ñ—Å—Ç—å –º¬≤ –¥–ª—è –º–∞–ª–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

**JavaScript:**
```javascript
Object.values(grouped).forEach(group => {
  const area_m2 = group.totalArea;
  const area_cm2 = area_m2 * 10000;  // –º¬≤ ‚Üí —Å–º¬≤
  
  // –Ø–∫—â–æ < 0.1 –º¬≤ - –ø–æ–∫–∞–∑—É—î–º–æ –≤ —Å–º¬≤
  const areaText = area_m2 < 0.1 
    ? `${area_cm2.toFixed(0)} —Å–º¬≤` 
    : `${area_m2.toFixed(3)} –º¬≤`;
  
  fenceLines.push(
    `${group.name}: ${group.depth} √ó ${group.width} √ó ${group.height} —Å–º - ${group.count} —à—Ç\n` +
    `  –ü–ª–æ—â–∞: ${areaText}, –û–±'—î–º: ${group.totalVolume.toFixed(4)} –º¬≥`
  );
});
```

---

### –ü—Ä–∏–∫–ª–∞–¥ 3: –ï–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ó–∞–¥–∞—á–∞:** –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø—ñ–¥—Å—É–º–æ–∫ –≤ JSON –¥–ª—è –¥—Ä—É–∫—É –∞–±–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

**JavaScript:**
```javascript
function exportSummaryToJSON() {
  // –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –¥–∞–Ω—ñ –∑ —Ç–∞–±–ª–∏—Ü—ñ
  const summary = {};
  
  const categories = [
    'foundation', 'tiling', 'blind-area', 'stand',
    'flowerbed', 'gravestone', 'stele', 'lamp',
    'fence-corner', 'fence-perimeter', 'fence-decor'
  ];
  
  categories.forEach(cat => {
    const element = document.getElementById(`summary-${cat}`);
    if (element && element.textContent !== '--') {
      summary[cat] = element.textContent;
    }
  });
  
  // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ JSON
  const json = JSON.stringify(summary, null, 2);
  
  // –ö–æ–ø—ñ—é—î–º–æ –≤ clipboard –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ
  navigator.clipboard.writeText(json);
  console.log('üìã –ü—ñ–¥—Å—É–º–æ–∫ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –≤ clipboard');
  
  return json;
}
```

---

### –ü—Ä–∏–∫–ª–∞–¥ 4: –î–æ–¥–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–µ–∫—Ç—É

**–ó–∞–¥–∞—á–∞:** –ü–æ–∫–∞–∑–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –ø–ª–æ—â—É —Ç–∞ –æ–±'—î–º –í–°–Ü–• –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

**JavaScript:**
```javascript
function calculateProjectTotals(data) {
  let totalArea = 0;
  let totalVolume = 0;
  let totalComponents = 0;
  
  // –û–±—Ö–æ–¥–∏–º–æ –≤—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
  Object.keys(data).forEach(category => {
    const items = data[category];
    
    if (Array.isArray(items)) {
      items.forEach(item => {
        totalArea += (item.area_m2 || 0);
        totalVolume += (item.volume_m3 || 0);
        totalComponents++;
      });
    }
  });
  
  return {
    totalComponents,
    totalArea: totalArea.toFixed(2),
    totalVolume: totalVolume.toFixed(3)
  };
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
const totals = calculateProjectTotals(data);
console.log(`–í—Å—å–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤: ${totals.totalComponents}`);
console.log(`–ó–∞–≥–∞–ª—å–Ω–∞ –ø–ª–æ—â–∞: ${totals.totalArea} –º¬≤`);
console.log(`–ó–∞–≥–∞–ª—å–Ω–∏–π –æ–±'—î–º: ${totals.totalVolume} –º¬≥`);
```

---

## ‚öôÔ∏è –¢–ï–•–ù–Ü–ß–ù–Ü –î–ï–¢–ê–õ–Ü

### –ß–æ–º—É `face.normal.z > 0.9` –∞ –Ω–µ `== 1.0`

```ruby
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
if face.normal.z == 1.0  # –ú–æ–∂–µ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –ø–æ—Ö–∏–±–∫–∏

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
if face.normal.z > 0.9   # –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ñ—Å—Ç—å ¬±25¬∞

# –ü–æ—è—Å–Ω–µ–Ω–Ω—è:
# normal.z = 1.0  ‚Üí —Ç–æ—á–Ω–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ –≤–≥–æ—Ä—É (0¬∞)
# normal.z = 0.9  ‚Üí –∫—É—Ç ~25¬∞ –≤—ñ–¥ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ
# normal.z = 0.7  ‚Üí –∫—É—Ç ~45¬∞
```

### –ß–æ–º—É –≤–∞–∂–ª–∏–≤–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è

```ruby
# –Ø–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–π:
component.transformation.xscale = 2.0  # –ü–æ–¥–≤–æ—î–Ω–∏–π –ø–æ X

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
area = face.area  # –ü–ª–æ—â–∞ –ë–ï–ó –º–∞—Å—à—Ç–∞–±—É

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
area = face.area * scale_x * scale_y  # –ü–ª–æ—â–∞ –ó –º–∞—Å—à—Ç–∞–±–æ–º

# –ü—Ä–∏–∫–ª–∞–¥:
# –ì—Ä–∞–Ω—å 10√ó10 –¥—é–π–º—ñ–≤ = 100 sq_in
# –ó –º–∞—Å—à—Ç–∞–±–æ–º 2√ó2: 100 * 2 * 2 = 400 sq_in ‚úÖ
# –ë–ï–ó –º–∞—Å—à—Ç–∞–±—É: 100 sq_in ‚ùå
```

### –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è

```ruby
# –î–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:
parent_trans = parent_component.transformation
child_trans = child_component.transformation

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
area = face.area * child_trans.xscale * child_trans.yscale

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
combined_trans = parent_trans * child_trans  # –ú–Ω–æ–∂–µ–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—å!
area = face.area * combined_trans.xscale * combined_trans.yscale

# –ü—Ä–∏–∫–ª–∞–¥:
# Parent scale: 1.5
# Child scale: 2.0
# Combined scale: 1.5 * 2.0 = 3.0 ‚úÖ
```

### –û–±—Ä–æ–±–∫–∞ —Ä—ñ–∑–Ω–∏—Ö –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ–π

```ruby
# –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—ó –≥—Ä–∞–Ω—ñ
normal = face.normal.transform(transformation)

if normal.z.abs > 0.9
  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ –≥—Ä–∞–Ω—å (–ø–ª–æ—â–∏–Ω–∞ XY)
  face_area = face.area * scale_x * scale_y
  
elsif normal.x.abs > 0.9
  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –≥—Ä–∞–Ω—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ YZ –ø–ª–æ—â–∏–Ω—ñ
  face_area = face.area * scale_y * scale_z
  
elsif normal.y.abs > 0.9
  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –≥—Ä–∞–Ω—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ XZ –ø–ª–æ—â–∏–Ω—ñ
  face_area = face.area * scale_x * scale_z
  
else
  # –ü–æ—Ö–∏–ª–∞ –≥—Ä–∞–Ω—å (—Å–∫–ª–∞–¥–Ω—ñ—à–µ)
  # –ü—Ä–∏–±–ª–∏–∑–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —á–µ—Ä–µ–∑ —Å–µ—Ä–µ–¥–Ω—ñ–π –º–∞—Å—à—Ç–∞–±
  avg_scale = Math.sqrt(scale_x * scale_y * scale_z)
  face_area = face.area * avg_scale * avg_scale
end
```

---

## üìä –¢–ê–ë–õ–ò–¶–Ø –§–û–†–ú–£–õ

### –®–≤–∏–¥–∫–∞ –¥–æ–≤—ñ–¥–∫–∞

| –¢–∏–ø | –ü–ª–æ—â–∞ | –û–±'—î–º | –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è |
|-----|-------|-------|------------|
| **Foundation** | –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å | Bounds | –û–¥–∏–Ω |
| **BlindArea** | –°—É–º–∞ –≤–µ—Ä—Ö–Ω—ñ—Ö (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ) | –ü–ª–æ—â–∞ √ó —Ç–æ–≤—â–∏–Ω–∞ | –û–¥–∏–Ω |
| **Tiles (–≥–æ—Ä–∏–∑.)** | –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å | Bounds | –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ |
| **Tiles (–≤–µ—Ä—Ç.)** | –ù–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å | Bounds | –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ + —Ç–∏–ø |
| **Stand** | –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å | Bounds | –ó–∞ —Ç–∏–ø–æ–º (–æ—Å–Ω–æ–≤–Ω–∞/–ø—Ä–æ–º—ñ–∂–Ω–∞) |
| **Stele** | –í–µ—Ä—Ö–Ω—è –≥—Ä–∞–Ω—å | Bounds | –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ |
| **Flowerbed** | –í–µ—Ä—Ö–Ω—è (–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö) | Bounds √ó trans | –ó–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ (—Ç—ñ–ª—å–∫–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ) |
| **CornerFence** | –ù–∞–π–±—ñ–ª—å—à–∞ (–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö) | Bounds √ó trans | –ó–∞ –Ω–∞–∑–≤–æ—é (—Ç—ñ–ª—å–∫–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ) |
| **FenceDecor** | –ù–∞–π–±—ñ–ª—å—à–∞ | Bounds | –ó–∞ –Ω–∞–∑–≤–æ—é |

---

## üöÄ WORKFLOW –°–ò–°–¢–ï–ú–ò

### –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø—Ä–æ—Ü–µ—Å

**1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–û–Ω–æ–≤–∏—Ç–∏"**
```javascript
// JavaScript (SummaryTable.js)
function refreshDetailedSummary() {
  window.sketchup.get_detailed_summary();
}
```

**2. Ruby –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ**
```ruby
# Ruby (callback_manager.rb)
def get_detailed_summary_callback(dialog)
  model = Sketchup.active_model
  entities = model.active_entities.grep(Sketchup::ComponentInstance)
  
  summary = {
    foundation: [],
    tiles: [],
    # ... —ñ–Ω—à—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
  }
  
  entities.each do |component|
    case component.definition.name
    when "Foundation"
      # ... –æ–±—Ä–æ–±–∫–∞ ...
      summary[:foundation] << item
    when /Modular_Tile/
      # ... –æ–±—Ä–æ–±–∫–∞ ...
      summary[:tiles] << item
    # ... —ñ–Ω—à—ñ –≤–∏–ø–∞–¥–∫–∏
    end
  end
  
  # –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è (—á–∞—Å—Ç–∫–æ–≤–æ)
  grouped_summary = {}
  summary.each do |category, items|
    if needs_javascript_grouping?(category)
      grouped_summary[category] = items  # –ë–ï–ó –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è
    else
      grouped_summary[category] = group_components(items)
    end
  end
  
  # –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ JavaScript
  json_data = grouped_summary.to_json
  dialog.execute_script("updateDetailedSummary(#{json_data});")
end
```

**3. JavaScript –æ–±—Ä–æ–±–ª—è—î**
```javascript
// JavaScript (SummaryTable.js)
function updateDetailedSummary(data) {
  // Foundation - –ø—Ä—è–º–∏–π –ø–æ–∫–∞–∑
  if (data.foundation && data.foundation.length > 0) {
    const f = data.foundation[0];
    const text = `${f.depth} √ó ${f.width} √ó ${f.height} —Å–º
–ü–ª–æ—â–∞: ${f.area_m2} –º¬≤
–û–±'—î–º: ${f.volume_m3} –º¬≥`;
    element.textContent = text;
  }
  
  // Tiles - –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è + —Å—É–º–∞
  if (data.tiles && data.tiles.length > 0) {
    const grouped = {};
    
    // –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏
    data.tiles.forEach(tile => {
      const key = `${tile.depth}√ó${tile.width}√ó${tile.height}`;
      if (!grouped[key]) {
        grouped[key] = { ..., count: 0, totalArea: 0, totalVolume: 0 };
      }
      grouped[key].count++;
      grouped[key].totalArea += tile.area_m2;
      grouped[key].totalVolume += tile.volume_m3;
    });
    
    // –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
    const lines = Object.values(grouped).map(g => 
      `–ü–ª–∏—Ç–∫–∞ ${g.depth}√ó${g.width}√ó${g.height} —Å–º - ${g.count} —à—Ç
  –ü–ª–æ—â–∞: ${g.totalArea.toFixed(3)} –º¬≤, –û–±'—î–º: ${g.totalVolume.toFixed(4)} –º¬≥`
    );
    
    // –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞
    const total = calculateTotals(grouped);
    lines.push(`\n–ó–ê–ì–ê–õ–û–ú:\n  –ü–ª–æ—â–∞: ${total.area} –º¬≤\n  –û–±'—î–º: ${total.volume} –º¬≥`);
    
    element.textContent = lines.join('\n\n');
  }
}
```

**4. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ HTML**
```html
<table class="summary-table">
  <tr>
    <td>–§—É–Ω–¥–∞–º–µ–Ω—Ç:</td>
    <td id="summary-foundation" class="summary-cell">
      15 √ó 200 √ó 100 —Å–º
      –ü–ª–æ—â–∞: 2.00 –º¬≤
      –û–±'—î–º: 0.300 –º¬≥
    </td>
  </tr>
  
  <tr>
    <td>–ü–ª–∏—Ç–∫–∞:</td>
    <td id="summary-tiling" class="summary-cell">
      –ü–ª–∏—Ç–∫–∞ 3 √ó 80 √ó 40 —Å–º - 5 —à—Ç
        –ü–ª–æ—â–∞: 1.600 –º¬≤, –û–±'—î–º: 0.0048 –º¬≥
      
      –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø–ª–∏—Ç–∫–∞ 3 √ó 200 √ó 100 —Å–º - 6 —à—Ç
        –ü–ª–æ—â–∞: 1.200 –º¬≤, –û–±'—î–º: 0.0036 –º¬≥
      
      –ó–ê–ì–ê–õ–û–ú:
        –ü–ª–æ—â–∞: 2.80 –º¬≤
        –û–±'—î–º: 0.008 –º¬≥
    </td>
  </tr>
</table>
```

---

## üéì BEST PRACTICES

### ‚úÖ DO (–†–æ–±–∏—Ç–∏)

1. **–ó–∞–≤–∂–¥–∏ –∫–æ–Ω–≤–µ—Ä—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ `.to_mm`:**
   ```ruby
   width_cm = (bounds.width.to_mm / 10.0).round(1)  # ‚úÖ
   ```

2. **–ó–∞–≤–∂–¥–∏ –≤—Ä–∞—Ö–æ–≤—É–π—Ç–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é:**
   ```ruby
   area = face.area * trans.xscale * trans.yscale  # ‚úÖ
   ```

3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö:**
   ```ruby
   combined = parent.transformation * child.transformation  # ‚úÖ
   ```

4. **–ì—Ä—É–ø—É–π—Ç–µ —Å—Ö–æ–∂—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤ JavaScript:**
   ```javascript
   const grouped = {};
   data.tiles.forEach(tile => {
     const key = `${tile.depth}√ó${tile.width}√ó${tile.height}`;
     // ... –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è
   });
   ```

5. **–î–æ–¥–∞–≤–∞–π—Ç–µ –∑–∞–≥–∞–ª—å–Ω—ñ —Å—É–º–∏:**
   ```javascript
   lines.push(`\n–ó–ê–ì–ê–õ–û–ú:\n  –ü–ª–æ—â–∞: ${total} –º¬≤`);  # ‚úÖ
   ```

6. **–õ–æ–≥—É–π—Ç–µ –∫–æ–∂–µ–Ω –∫—Ä–æ–∫:**
   ```ruby
   ProGran3::Logger.info("üìä –ü–ª–æ—â–∞: #{area_m2} –º¬≤", "Summary")  # ‚úÖ
   ```

---

### ‚ùå DON'T (–ù–µ —Ä–æ–±–∏—Ç–∏)

1. **–ù–ï –¥—ñ–ª–∏—Ç–∏ –¥—é–π–º–∏ –Ω–∞–ø—Ä—è–º—É:**
   ```ruby
   width_cm = bounds.width / 10.0  # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
   ```

2. **–ù–ï —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é:**
   ```ruby
   area = face.area  # ‚ùå –ë–ï–ó –º–∞—Å—à—Ç–∞–±—É!
   ```

3. **–ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ bounds –¥–ª—è —Ä–∞–º–∫–æ–≤–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä:**
   ```ruby
   # –î–ª—è BlindArea:
   volume = bounds.width * bounds.depth * bounds.height  # ‚ùå –ó –¥—ñ—Ä–æ—é!
   volume = area * thickness  # ‚úÖ –†–µ–∞–ª—å–Ω–∏–π –æ–±'—î–º
   ```

4. **–ù–ï –≥—Ä—É–ø—É–≤–∞—Ç–∏ –≤ Ruby –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏:**
   ```ruby
   # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   grouped_summary[:tiles] = group_components(items)  # –í—Ç—Ä–∞—Ç–∏—Ç—å area_m2!
   
   # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
   grouped_summary[:tiles] = items  # –ó–±–µ—Ä—ñ–≥–∞—î –≤—Å—ñ –ø–æ–ª—è
   ```

5. **–ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `==` –¥–ª—è float –ø–æ—Ä—ñ–≤–Ω—è–Ω—å:**
   ```ruby
   if face.normal.z == 1.0  # ‚ùå –ú–æ–∂–µ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞—Ç–∏
   if face.normal.z > 0.9   # ‚úÖ –ó —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ñ—Å—Ç—é
   ```

---

## üîç TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ (–Ω–∞–¥—Ç–æ –º–∞–ª—ñ)

**–°–∏–º–ø—Ç–æ–º–∏:** `0.6 √ó 7.9 √ó 3.9 —Å–º` –∑–∞–º—ñ—Å—Ç—å `15 √ó 200 √ó 100 —Å–º`

**–ü—Ä–∏—á–∏–Ω–∞:** –í—ñ–¥—Å—É—Ç–Ω—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è `.to_mm`

**–†—ñ—à–µ–Ω–Ω—è:**
```ruby
# ‚ùå –ë—É–ª–æ
width = (bounds.width / 10.0).round(1)

# ‚úÖ –°—Ç–∞–ª–æ
width = (bounds.width.to_mm / 10.0).round(1)
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–ª–æ—â–∞ = 0 –∞–±–æ –¥—É–∂–µ –º–∞–ª–∞

**–°–∏–º–ø—Ç–æ–º–∏:** `–ü–ª–æ—â–∞: 0.00 –º¬≤` –∞–±–æ `–ü–ª–æ—â–∞: 0.001 –º¬≤`

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**

**1. –ù–µ –≤—Ä–∞—Ö–æ–≤–∞–Ω–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é:**
```ruby
# ‚ùå –ë—É–ª–æ
area = face.area

# ‚úÖ –°—Ç–∞–ª–æ
area = face.area * trans.xscale * trans.yscale
```

**2. –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≥—Ä–∞–Ω—ñ:**
```ruby
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
face_count = component.definition.entities.grep(Sketchup::Face).count
puts "–ì—Ä–∞–Ω–µ–π: #{face_count}"

# –Ø–∫—â–æ 0 - –º–æ–∂–ª–∏–≤–æ —Ü–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Ç—Ä–µ–±–∞ —à—É–∫–∞—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ
```

**3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è:**
```ruby
# –î–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:
if face.normal.z > 0.9  # ‚ùå –®—É–∫–∞—î –≤–µ—Ä—Ö–Ω—ñ, –∞ —ó—Ö –Ω–µ–º–∞—î!

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –º–µ—Ç–æ–¥ "–Ω–∞–π–±—ñ–ª—å—à–∞ –≥—Ä–∞–Ω—å"
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –û–±'—î–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π

**–°–∏–º–ø—Ç–æ–º–∏:** –î–ª—è BlindArea `0.208 –º¬≥` –∑–∞–º—ñ—Å—Ç—å `0.108 –º¬≥`

**–ü—Ä–∏—á–∏–Ω–∞:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ bounds –¥–ª—è —Ä–∞–º–∫–æ–≤–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

**–†—ñ—à–µ–Ω–Ω—è:**
```ruby
# ‚ùå –î–ª—è —Ä–∞–º–∫–∏
volume = bounds.width * bounds.depth * bounds.height

# ‚úÖ –î–ª—è —Ä–∞–º–∫–∏
volume = area_m2 * (thickness_mm / 1000.0)
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω—ñ –Ω–µ –¥–æ—Ö–æ–¥—è—Ç—å –¥–æ UI (undefined)

**–°–∏–º–ø—Ç–æ–º–∏:** `–ü–ª–æ—â–∞: N/A –º¬≤`, `–û–±'—î–º: N/A –º¬≥`

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**

**1. Ruby –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –≤–∏–¥–∞–ª—è—î –ø–æ–ª—è:**
```ruby
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
grouped_summary[:tiles] = group_components(items)

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
grouped_summary[:tiles] = items  # –ë–ï–ó –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è!
```

**2. JavaScript –Ω–µ –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ:**
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ console:
console.log('üìê Tiles –¥–∞–Ω—ñ:', data.tiles);
console.log('  area_m2:', data.tiles[0].area_m2);

// –Ø–∫—â–æ undefined - –ø—Ä–æ–±–ª–µ–º–∞ –≤ Ruby
// –Ø–∫—â–æ —î - –ø—Ä–æ–±–ª–µ–º–∞ –≤ JavaScript –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ
```

**3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î:**
```javascript
// ‚ùå –ö–û–ù–§–õ–Ü–ö–¢
updateFoundationSummary();  // –ü–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏ —Ä–æ–∑–º—ñ—Ä–∏
updateDetailedSummary();    // –ü–æ–∫–∞–∑—É—î —Ä–æ–∑–º—ñ—Ä–∏ + –ø–ª–æ—â–∞ + –æ–±'—î–º

// –î—Ä—É–≥–∞ —Ñ—É–Ω–∫—Ü—ñ—è –º–æ–∂–µ –±—É—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∞ –ø–µ—Ä—à–æ—é!

// ‚úÖ –†–Ü–®–ï–ù–ù–Ø
// –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
// updateFoundationSummary(addedElements, currentUnit);
```

---

## üìù CHECKLIST –î–õ–Ø –ù–û–í–ò–• –ö–û–ú–ü–û–ù–ï–ù–¢–Ü–í

### –ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

- [ ] **Ruby: case block**
  ```ruby
  when /MyComponent/i
    # ... –∫–æ–¥ –æ–±—Ä–æ–±–∫–∏
  ```

- [ ] **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä—ñ–≤ —á–µ—Ä–µ–∑ `.to_mm`**
  ```ruby
  width_cm = (bounds.width.to_mm / 10.0).round(1)
  ```

- [ ] **–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–ª–æ—â—ñ –∑ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é**
  ```ruby
  area = face.area * scale_x * scale_y
  area_m2 = (area / 1550.0031).round(?)
  ```

- [ ] **–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ–±'—î–º—É**
  ```ruby
  volume_cu_inches = bounds.width * bounds.depth * bounds.height
  volume_m3 = (volume_cu_inches * 0.000016387064).round(?)
  ```

- [ ] **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è item –∑ —É—Å—ñ–º–∞ –ø–æ–ª—è–º–∏**
  ```ruby
  item = { name, width, depth, height, area_m2, volume_m3, material }
  ```

- [ ] **–î–æ–¥–∞—Ç–∏ –¥–æ summary**
  ```ruby
  summary[:my_category] << item
  ```

- [ ] **–î–æ–¥–∞—Ç–∏ –¥–æ –ù–ï–≥—Ä—É–ø–æ–≤–∞–Ω–∏—Ö (—è–∫—â–æ –º–∞—î area/volume)**
  ```ruby
  if category == :foundation || ... || category == :my_category
  ```

- [ ] **JavaScript: –æ–±—Ä–æ–±–Ω–∏–∫ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è**
  ```javascript
  if (data.my_category && data.my_category.length > 0) {
    // ... –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è + –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
  }
  ```

- [ ] **HTML: —Ä—è–¥–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—ñ**
  ```html
  <tr>
    <td>–ú–æ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è:</td>
    <td id="summary-my-category" class="summary-cell">--</td>
  </tr>
  ```

- [ ] **–õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è (uk.json, pl.json, en.json)**
  ```json
  "summary": {
    "my_category": "–ú–æ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è"
  }
  ```

- [ ] **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
  - –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –º–æ–¥–µ–ª—ñ
  - –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–û–Ω–æ–≤–∏—Ç–∏"
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏, –ø–ª–æ—â—É, –æ–±'—î–º
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è (—è–∫—â–æ > 1)

---

## üéØ –ü–†–ò–ö–õ–ê–î–ò –†–ï–ê–õ–¨–ù–û–ì–û –ö–û–î–£

### –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥: –û–±—Ä–æ–±–∫–∞ Steles

**Ruby (callback_manager.rb):**
```ruby
when /stele/i
  ProGran3::Logger.info("üîπ –°—Ç–µ–ª–∞ –∑–Ω–∞–π–¥–µ–Ω–∞: #{name}", "Summary")
  
  bounds = component.bounds
  trans = component.transformation
  
  # –†–æ–∑–º—ñ—Ä–∏ –≤ —Å–º
  width_cm = (bounds.width.to_mm / 10.0).round(1)
  depth_cm = (bounds.depth.to_mm / 10.0).round(1)
  height_cm = (bounds.height.to_mm / 10.0).round(1)
  
  # –ü–ª–æ—â–∞ –≤–µ—Ä—Ö–Ω—å–æ—ó –≥—Ä–∞–Ω—ñ
  scale_x = trans.xscale
  scale_y = trans.yscale
  
  top_area = 0
  component.definition.entities.grep(Sketchup::Face).each do |face|
    if face.normal.z > 0.9
      top_area += face.area * scale_x * scale_y
    end
  end
  area_m2 = (top_area / 1550.0031).round(3)
  
  # –û–±'—î–º
  volume_cu_inches = bounds.width * bounds.depth * bounds.height
  volume_m3 = (volume_cu_inches * 0.000016387064).round(4)
  
  ProGran3::Logger.info("  üìè –°—Ç–µ–ª–∞: #{depth_cm} √ó #{width_cm} √ó #{height_cm} —Å–º, –ü–ª–æ—â–∞: #{area_m2} –º¬≤, –û–±'—î–º: #{volume_m3} –º¬≥", "Summary")
  
  item = {
    name: name,
    width: width_cm,
    depth: depth_cm,
    height: height_cm,
    area_m2: area_m2,
    volume_m3: volume_m3,
    material: get_component_material(component)
  }
  summary[:steles] << item
```

**JavaScript (SummaryTable.js):**
```javascript
// –û–Ω–æ–≤–ª—é—î–º–æ –°—Ç–µ–ª–∏ (–≥—Ä—É–ø—É—î–º–æ –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏)
if (data.steles && data.steles.length > 0) {
  const steleEl = safeGetElement('summary-stele');
  if (steleEl) {
    const grouped = {};
    
    // –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è
    data.steles.forEach(stele => {
      const key = `${stele.depth}√ó${stele.width}√ó${stele.height}`;
      
      if (!grouped[key]) {
        grouped[key] = {
          depth: stele.depth,
          width: stele.width,
          height: stele.height,
          count: 0,
          totalArea: 0,
          totalVolume: 0
        };
      }
      
      grouped[key].count++;
      grouped[key].totalArea += (stele.area_m2 || 0);
      grouped[key].totalVolume += (stele.volume_m3 || 0);
    });
    
    // –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
    const steleLines = [];
    let totalArea = 0;
    let totalVolume = 0;
    
    Object.values(grouped).forEach(group => {
      totalArea += group.totalArea;
      totalVolume += group.totalVolume;
      
      steleLines.push(
        `–°—Ç–µ–ª–∞ ${group.depth} √ó ${group.width} √ó ${group.height} —Å–º - ${group.count} —à—Ç\n` +
        `  –ü–ª–æ—â–∞: ${group.totalArea.toFixed(3)} –º¬≤, –û–±'—î–º: ${group.totalVolume.toFixed(4)} –º¬≥`
      );
    });
    
    // –î–æ–¥–∞—î–º–æ –∑–∞–≥–∞–ª–æ–º (—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ > 1 —Ç–∏–ø—É)
    if (Object.keys(grouped).length > 1) {
      steleLines.push(
        `\n–ó–ê–ì–ê–õ–û–ú:\n` +
        `  –ü–ª–æ—â–∞: ${totalArea.toFixed(2)} –º¬≤\n` +
        `  –û–±'—î–º: ${totalVolume.toFixed(3)} –º¬≥`
      );
    }
    
    const text = steleLines.join('\n\n');
    safeSetTextContent(steleEl, text);
  }
}
```

---

## üìö –î–û–î–ê–¢–ö–û–í–Ü –†–ï–°–£–†–°–ò

### –ü–æ–≤'—è–∑–∞–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏

- `SKETCHUP_API_COMPONENTS_GUIDE.md` - –ë–∞–∑–æ–≤–∞ —Ä–æ–±–æ—Ç–∞ –∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- `plugin/proGran3/callback_manager.rb` - –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (—Ä—è–¥–∫–∏ 994-1650)
- `plugin/proGran3/web/modules/ui/SummaryTable.js` - Frontend –æ–±—Ä–æ–±–∫–∞
- `COORDINATE_SYSTEM_STANDARD.md` - –°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (X=North/South)

### –ö–æ—Ä–∏—Å–Ω—ñ –º–µ—Ç–æ–¥–∏ SketchUp API

```ruby
# Bounds
component.bounds.width
component.bounds.depth
component.bounds.height
component.bounds.center
component.bounds.min
component.bounds.max

# Transformation
trans.origin        # Point3d
trans.xscale        # Float
trans.yscale        # Float
trans.zscale        # Float
trans.to_a          # Array (–º–∞—Ç—Ä–∏—Ü—è 4√ó4)

# Face
face.area           # Float (sq_inches)
face.normal         # Vector3d
face.vertices       # Array<Vertex>
face.material       # Material

# Definition
definition.name
definition.description
definition.entities
definition.count_instances
definition.bounds

# Entities
entities.grep(Sketchup::Face)
entities.grep(Sketchup::ComponentInstance)
entities.grep(Sketchup::Group)
```

---

## üéâ –ü–Ü–î–°–£–ú–û–ö

### –ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏

1. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –æ–¥–∏–Ω–∏—Ü—å** - –∑–∞–≤–∂–¥–∏ —á–µ—Ä–µ–∑ `.to_mm`, –ø–æ—Ç—ñ–º –¥—ñ–ª–∏—Ç–∏
2. **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó** - –ó–ê–í–ñ–î–ò –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –ø–ª–æ—â—ñ —Ç–∞ –æ–±'—î–º—É
3. **–†–µ–∫—É—Ä—Å—ñ—è** - –¥–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (BlindArea, Flowerbed, CornerFence)
4. **–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è** - –≤ JavaScript –∑–∞ —Ä–æ–∑–º—ñ—Ä–∞–º–∏, –≤ Ruby –ù–ï –≥—Ä—É–ø—É–≤–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏
5. **–û—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è –≥—Ä–∞–Ω–µ–π** - horizontal vs vertical (—Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º—É–ª–∏ –ø–ª–æ—â—ñ)
6. **–†–∞–º–∫–æ–≤—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏** - –æ–±'—î–º —á–µ—Ä–µ–∑ `–ø–ª–æ—â–∞ √ó —Ç–æ–≤—â–∏–Ω–∞`, –ù–ï bounds

### –§–æ—Ä–º—É–ª–∏ quick reference

```ruby
# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è
cm = (inches.to_mm / 10.0).round(1)
m2 = (sq_inches / 1550.0031).round(2)
m3 = (cu_inches * 0.000016387064).round(3)

# –ü–ª–æ—â–∞ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞)
area = face.area * scale_x * scale_y

# –ü–ª–æ—â–∞ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞)
area = face.area * scale_y * scale_z  # –∞–±–æ scale_x * scale_z

# –û–±'—î–º (—Å—É—Ü—ñ–ª—å–Ω–∏–π)
volume = bounds.width * bounds.depth * bounds.height

# –û–±'—î–º (—Ä–∞–º–∫–∞)
volume = area_m2 * (thickness_mm / 1000.0)

# –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è
combined = parent_trans * child_trans
```

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ:** 18 –∂–æ–≤—Ç–Ω—è 2025  
**–ê–≤—Ç–æ—Ä:** ProGran3 Development Team  
**–í–µ—Ä—Å—ñ—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

