# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ "–õ—ñ—Ü–µ–Ω–∑—ñ—è –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –∞–ª–µ –ø—ñ—Å–ª—è heartbeat –∑–ª—ñ—Ç–∞—î"

## üö® **–û–ü–ò–° –ü–†–û–ë–õ–ï–ú–ò**

### **–°–∏–º–ø—Ç–æ–º–∏:**
- –õ—ñ—Ü–µ–Ω–∑—ñ—è —É—Å–ø—ñ—à–Ω–æ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –≤ –ø–ª–∞–≥—ñ–Ω—ñ
- –°–µ—Ä–≤–µ—Ä –ø–æ–∫–∞–∑—É—î "–≤–∂–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∞" 
- –ü—ñ—Å–ª—è heartbeat –ø–ª–∞–≥—ñ–Ω –±–ª–æ–∫—É—î—Ç—å—Å—è
- –õ—ñ—Ü–µ–Ω–∑—ñ—è "–∑–ª—ñ—Ç–∞—î" —ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É

### **–ü—Ä–∏—á–∏–Ω–∏:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó** - —Å–µ—Ä–≤–µ—Ä —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏ –∑–∞–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö
2. **–ü—Ä–æ–±–ª–µ–º–∞ –∑ Hardware ID** - –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏
3. **–ê–≥—Ä–µ—Å–∏–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è** - –ø–ª–∞–≥—ñ–Ω –±–ª–æ–∫—É—î—Ç—å—Å—è –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –ª—ñ—Ü–µ–Ω–∑—ñ—ó –≤ heartbeat

---

## üõ†Ô∏è **–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø**

### **–ö—Ä–æ–∫ 1: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –ª—ñ—Ü–µ–Ω–∑—ñ—ó**

**–§–∞–π–ª:** `server/src/lib/license-validator.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä —Å—Ç–≤–æ—Ä—é–≤–∞–≤ –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏ `user_license` –∑–∞–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –ó–º—ñ–Ω–µ–Ω–æ –ª–æ–≥—ñ–∫—É - —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∞ –ª—ñ—Ü–µ–Ω–∑—ñ—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–º–∏–ª–∫—É –∑–∞–º—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó.

```typescript
// –ë–£–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
if (userLicenseError || !userLicense) {
  // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å user_license
  // –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤
}

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
if (userLicenseError || !userLicense) {
  return {
    isValid: false,
    isBlocked: true,
    reason: 'License not activated on this device'
  };
}
```

### **–ö—Ä–æ–∫ 2: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ heartbeat**

**–§–∞–π–ª:** `server/src/app/api/heartbeat/route.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–≥—ñ–Ω –±–ª–æ–∫—É–≤–∞–≤—Å—è –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –ª—ñ—Ü–µ–Ω–∑—ñ—ó –≤ heartbeat.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –Ø–≤–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ `isBlocked = false` –∑–∞–º—ñ—Å—Ç—å `undefined`.

```typescript
// –ë–£–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
isBlocked = undefined; // –ù–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
isBlocked = false; // –Ø–≤–Ω–æ –Ω–µ –±–ª–æ–∫—É—î–º–æ –ø–ª–∞–≥—ñ–Ω
```

---

## üîç **–î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–ò**

### **–°–∫—Ä–∏–ø—Ç –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
```bash
cd server
node debug-license-issue.js <EMAIL> <LICENSE_KEY> <HARDWARE_ID>
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
node debug-license-issue.js user@example.com TQ58-IKVR-9X2M-7N4P desktop-user-123
```

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Å–∫—Ä–∏–ø—Ç:**
1. ‚úÖ –°—Ç–∞—Ç—É—Å –º–∞–π—Å—Ç–µ—Ä-–ª—ñ—Ü–µ–Ω–∑—ñ—ó
2. ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –ª—ñ—Ü–µ–Ω–∑—ñ—ó
3. ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—É –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é email + license_key + hardware_id
4. ‚úÖ –°—Ç–∞—Ç—É—Å –ø–ª–∞–≥—ñ–Ω—ñ–≤
5. ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

---

## üîß **–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ü–†–û–ë–õ–ï–ú–ò**

### **–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```bash
cd server
node fix-license-issue.js <EMAIL> <LICENSE_KEY> <HARDWARE_ID>
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
node fix-license-issue.js user@example.com TQ58-IKVR-9X2M-7N4P desktop-user-123
```

**–©–æ —Ä–æ–±–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:**
1. üîß –ê–∫—Ç–∏–≤—É—î –º–∞–π—Å—Ç–µ—Ä-–ª—ñ—Ü–µ–Ω–∑—ñ—é —è–∫—â–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
2. üîß –†–µ–∞–∫—Ç–∏–≤—É—î —ñ—Å–Ω—É—é—á—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—É –ª—ñ—Ü–µ–Ω–∑—ñ—é
3. üîß –°—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—É –ª—ñ—Ü–µ–Ω–∑—ñ—é —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
4. üîß –û–Ω–æ–≤–ª—é—î –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∞–∫—Ç–∏–≤–∞—Ü—ñ–π
5. üéâ –ü–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

---

## üìã **–ü–û–ö–†–û–ö–û–í–Ü –Ü–ù–°–¢–†–£–ö–¶–Ü–á**

### **–î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**

#### **1. –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–∏:**
```bash
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–ø–∫—É server
cd server

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É (–∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à—ñ –¥–∞–Ω—ñ)
node debug-license-issue.js your-email@example.com YOUR-LICENSE-KEY your-hardware-id
```

#### **2. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏:**
```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
node fix-license-issue.js your-email@example.com YOUR-LICENSE-KEY your-hardware-id
```

#### **3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É:**
- –°–ø—Ä–æ–±—É–π—Ç–µ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ª—ñ—Ü–µ–Ω–∑—ñ—é –≤ –ø–ª–∞–≥—ñ–Ω—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –±–ª–æ–∫—É—î—Ç—å—Å—è –ø–ª–∞–≥—ñ–Ω –ø—ñ—Å–ª—è heartbeat
- –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è - –∑–∞–ø—É—Å—Ç—ñ—Ç—å –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∑–Ω–æ–≤—É

### **–î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞:**

#### **1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
# –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
vercel logs --follow
```

#### **2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:**
```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–∞–π—Å—Ç–µ—Ä-–ª—ñ—Ü–µ–Ω–∑—ñ–π
SELECT * FROM licenses WHERE license_key = 'YOUR-LICENSE-KEY';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –ª—ñ—Ü–µ–Ω–∑—ñ–π
SELECT * FROM user_licenses WHERE email = 'your-email@example.com';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–≥—ñ–Ω—ñ–≤
SELECT * FROM plugins ORDER BY last_heartbeat DESC LIMIT 5;
```

---

## ‚ö†Ô∏è **–í–Ü–î–û–ú–Ü –ü–†–û–ë–õ–ï–ú–ò –¢–ê –†–Ü–®–ï–ù–ù–Ø**

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: "License activation limit exceeded"**
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –°–∫–∏–Ω—É—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∞–∫—Ç–∏–≤–∞—Ü—ñ–π
node reset-license-activation.js <EMAIL> <LICENSE_KEY>
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: "License already activated on this device"**
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –û—á–∏—Å—Ç–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏
node cleanup-duplicates.js <EMAIL> <HARDWARE_ID>
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: Hardware ID –∑–º—ñ–Ω—é—î—Ç—å—Å—è**
**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó Hardware ID
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

---

## üß™ **–¢–ï–°–¢–£–í–ê–ù–ù–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø**

### **–¢–µ—Å—Ç 1: –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ª—ñ—Ü–µ–Ω–∑—ñ—ó**
1. –û—á–∏—Å—Ç—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω—É –ª—ñ—Ü–µ–Ω–∑—ñ—é: `$license_manager.clear_license`
2. –ê–∫—Ç–∏–≤—É–π—Ç–µ –ª—ñ—Ü–µ–Ω–∑—ñ—é –∑–Ω–æ–≤—É
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –±–ª–æ–∫—É—î—Ç—å—Å—è –ø–ª–∞–≥—ñ–Ω

### **–¢–µ—Å—Ç 2: Heartbeat –±–µ–∑ –ª—ñ—Ü–µ–Ω–∑—ñ—ó**
1. –ó–∞–∫—Ä–∏–π—Ç–µ UI –ø–ª–∞–≥—ñ–Ω–∞
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ UI –∑–Ω–æ–≤—É (heartbeat –±–µ–∑ –ª—ñ—Ü–µ–Ω–∑—ñ—ó)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –±–ª–æ–∫—É—î—Ç—å—Å—è –ø–ª–∞–≥—ñ–Ω

### **–¢–µ—Å—Ç 3: Heartbeat –∑ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é**
1. –ê–∫—Ç–∏–≤—É–π—Ç–µ –ª—ñ—Ü–µ–Ω–∑—ñ—é
2. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è heartbeat (3 —Ö–≤–∏–ª–∏–Ω–∏)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫—É–≤–∞–Ω–Ω—è

---

## üìä **–ú–û–ù–Ü–¢–û–†–ò–ù–ì**

### **–ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è:**
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É—Å–ø—ñ—à–Ω–∏—Ö –∞–∫—Ç–∏–≤–∞—Ü—ñ–π –ª—ñ—Ü–µ–Ω–∑—ñ–π
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö –ø–ª–∞–≥—ñ–Ω—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- –ß–∞—Å –≤—ñ–¥–≥—É–∫—É heartbeat

### **–õ–æ–≥–∏ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É:**
```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
vercel logs --follow

# –õ–æ–≥–∏ –ø–ª–∞–≥—ñ–Ω–∞ (–≤ SketchUp Console)
# –®—É–∫–∞–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º [HEARTBEAT]
```

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢ –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø**

### **–û—á—ñ–∫—É–≤–∞–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:**
- ‚úÖ –õ—ñ—Ü–µ–Ω–∑—ñ—ó –Ω–µ "–∑–ª—ñ—Ç–∞—é—Ç—å" –ø—ñ—Å–ª—è heartbeat
- ‚úÖ –ü–ª–∞–≥—ñ–Ω–∏ –Ω–µ –±–ª–æ–∫—É—é—Ç—å—Å—è –±–µ–∑ –ø—Ä–∏—á–∏–Ω–∏
- ‚úÖ –°—Ç–∞–±—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º–∏ –ª—ñ—Ü–µ–Ω–∑—É–≤–∞–Ω–Ω—è
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–Ω—è —Å–∫–∞—Ä–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### **–ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É:**
- –õ—ñ—Ü–µ–Ω–∑—ñ—è –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ —ñ –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ
- Heartbeat –Ω–µ –±–ª–æ–∫—É—î –ø–ª–∞–≥—ñ–Ω –±–µ–∑ –ø—Ä–∏—á–∏–Ω–∏
- –°–µ—Ä–≤–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∞–ª—ñ–¥—É—î —ñ—Å–Ω—É—é—á—ñ –ª—ñ—Ü–µ–Ω–∑—ñ—ó
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ "–≤–∂–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∞" –ø—Ä–∏ –≤–∞–ª—ñ–¥–Ω—ñ–π –ª—ñ—Ü–µ–Ω–∑—ñ—ó

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 27 –≤–µ—Ä–µ—Å–Ω—è 2025 —Ä–æ–∫—É  
**–í–µ—Ä—Å—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** ProGran3 Development Team



