<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>ProGran3 Language Switcher Demo</title>
  <style>
    body {
      font-family: 'Manrope', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .demo-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }
    
    .demo-content {
      padding: 30px;
    }
    
    .demo-section {
      margin: 30px 0;
      padding: 20px;
      border: 1px solid #e1e5e9;
      border-radius: 10px;
      background: #f8f9fa;
    }
    
    .demo-section h3 {
      color: #667eea;
      margin-top: 0;
    }
    
    .feature-list {
      list-style: none;
      padding: 0;
    }
    
    .feature-list li {
      padding: 8px 0;
      border-bottom: 1px solid #e1e5e9;
    }
    
    .feature-list li:before {
      content: "‚úÖ ";
      margin-right: 10px;
    }
    
    .demo-buttons {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    
    .demo-button {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .demo-button:hover {
      background: #5a6fd8;
      transform: translateY(-2px);
    }
    
    .demo-button.secondary {
      background: #6c757d;
    }
    
    .demo-button.secondary:hover {
      background: #5a6268;
    }
    
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    
    .status-success { background: #28a745; }
    .status-warning { background: #ffc107; }
    .status-error { background: #dc3545; }
    
    .responsive-demo {
      border: 2px dashed #667eea;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      background: #f8f9ff;
    }
    
    @media (max-width: 768px) {
      .demo-buttons {
        flex-direction: column;
      }
      
      .demo-button {
        width: 100%;
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="demo-container">
    <div class="demo-header">
      <h1>üåç ProGran3 Language Switcher</h1>
      <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ –ø–µ—Ä–µ–º–∏–∫–∞—á–∞ –º–æ–≤</p>
    </div>
    
    <div class="demo-content">
      <div class="demo-section">
        <h3>üéØ –û—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è</h3>
        <ul class="feature-list">
          <li>–ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ —Ä–æ–∑–º—ñ—â–µ–Ω–∏–π –ø–æ—Ä—É—á –∑ –ø–µ—Ä–µ–º–∏–∫–∞—á–µ–º –æ–¥–∏–Ω–∏—Ü—å</li>
          <li>–ù–∞–∑–≤–∞ "ProGran" –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ —Å–≤–æ—î–º—É –º—ñ—Å—Ü—ñ</li>
          <li>Dropdown –Ω–µ —Ö–æ–≤–∞—î—Ç—å—Å—è –∑–∞ –º–µ–∂—É –∑–∞–≥–æ–ª–æ–≤–∫–∞</li>
          <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è (–≤–≥–æ—Ä—É/–≤–Ω–∏–∑ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –º—ñ—Å—Ü—è)</li>
          <li>–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤</li>
          <li>–ö—Ä–∞—Å–∏–≤—ñ –∞–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏</li>
          <li>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–µ–º–Ω–æ—ó —Ç–µ–º–∏</li>
        </ul>
      </div>
      
      <div class="demo-section">
        <h3>üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ</h3>
        <div class="demo-buttons">
          <button class="demo-button" onclick="testLanguageChange('uk')">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
          <button class="demo-button" onclick="testLanguageChange('pl')">üáµüá± Polski</button>
          <button class="demo-button" onclick="testLanguageChange('en')">üá¨üáß English</button>
          <button class="demo-button secondary" onclick="testPositioning()">üìç –¢–µ—Å—Ç —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è</button>
          <button class="demo-button secondary" onclick="toggleDropdown()">üîΩ –¢–µ—Å—Ç dropdown</button>
        </div>
      </div>
      
      <div class="demo-section">
        <h3>üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å</h3>
        <div class="responsive-demo">
          <p><strong>–ù–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö:</strong></p>
          <ul>
            <li>Header —Å—Ç–∞—î –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–º</li>
            <li>–ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ø–æ—Ä—É—á –∑ –æ–¥–∏–Ω–∏—Ü—è–º–∏</li>
            <li>Dropdown —Ü–µ–Ω—Ç—Ä—É—î—Ç—å—Å—è –≤—ñ–¥–Ω–æ—Å–Ω–æ –ø–µ—Ä–µ–º–∏–∫–∞—á–∞</li>
            <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –¥–ª—è –∫—Ä–∞—â–æ—ó –≤–∏–¥–∏–º–æ—Å—Ç—ñ</li>
            <li>–ó–º–µ–Ω—à–µ–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –º—ñ—Å—Ü—è</li>
          </ul>
        </div>
      </div>
      
      <div class="demo-section">
        <h3>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏</h3>
        <div id="system-status">
          <p><span class="status-indicator status-warning"></span>–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è...</p>
        </div>
      </div>
      
      <div class="demo-section">
        <h3>üìù –õ–æ–≥–∏</h3>
        <div id="demo-logs" style="height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px; background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
          <div>üîç –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–≤...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –º–æ–¥—É–ª—ñ -->
  <script src="modules/core/Logger.js"></script>
  <script src="modules/ui/LanguageSwitcher.js"></script>
  <script src="i18n/I18nManager.js"></script>
  
  <script>
    // –õ–æ–≥–≥–µ—Ä –¥–ª—è –¥–µ–º–æ
    function logDemo(message, type = 'info') {
      const logs = document.getElementById('demo-logs');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.style.color = type === 'error' ? '#fc8181' : 
                            type === 'success' ? '#68d391' : 
                            type === 'warning' ? '#f6e05e' : '#90cdf4';
      logEntry.textContent = `[${timestamp}] ${message}`;
      logs.appendChild(logEntry);
      logs.scrollTop = logs.scrollHeight;
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É
    function updateStatus(message, type = 'warning') {
      const status = document.getElementById('system-status');
      const indicator = status.querySelector('.status-indicator');
      indicator.className = `status-indicator status-${type}`;
      status.innerHTML = `<span class="status-indicator status-${type}"></span>${message}`;
    }
    
    // –¢–µ—Å—Ç –∑–º—ñ–Ω–∏ –º–æ–≤–∏
    async function testLanguageChange(lang) {
      logDemo(`üîÑ –¢–µ—Å—Ç—É—î–º–æ –∑–º—ñ–Ω—É –º–æ–≤–∏ –Ω–∞: ${lang}`, 'info');
      
      if (window.ProGran3 && window.ProGran3.I18n && window.ProGran3.I18n.Manager) {
        try {
          const success = await window.ProGran3.I18n.Manager.changeLanguage(lang);
          if (success) {
            logDemo(`‚úÖ –ú–æ–≤—É —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞: ${lang}`, 'success');
            updateStatus(`–ê–∫—Ç–∏–≤–Ω–∞ –º–æ–≤–∞: ${lang}`, 'success');
          } else {
            logDemo(`‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –∑–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É –Ω–∞: ${lang}`, 'error');
            updateStatus('–ü–æ–º–∏–ª–∫–∞ –∑–º—ñ–Ω–∏ –º–æ–≤–∏', 'error');
          }
        } catch (error) {
          logDemo(`‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`, 'error');
          updateStatus('–ü–æ–º–∏–ª–∫–∞ —Å–∏—Å—Ç–µ–º–∏', 'error');
        }
      } else {
        logDemo('‚ùå I18nManager –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π', 'error');
        updateStatus('–°–∏—Å—Ç–µ–º–∞ –Ω–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞', 'error');
      }
    }
    
    // –¢–µ—Å—Ç —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è
    function testPositioning() {
      logDemo('üß™ –¢–µ—Å—Ç—É—î–º–æ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –ø–µ—Ä–µ–º–∏–∫–∞—á–∞...', 'info');
      
      const switcher = document.getElementById('language-switcher');
      if (switcher) {
        const rect = switcher.getBoundingClientRect();
        const headerCenter = document.querySelector('.header-center');
        
        if (headerCenter) {
          const centerRect = headerCenter.getBoundingClientRect();
          const isCentered = Math.abs(rect.left - centerRect.left) < 50;
          
          if (isCentered) {
            logDemo('‚úÖ –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ —Ä–æ–∑–º—ñ—â–µ–Ω–∏–π –ø–æ —Ü–µ–Ω—Ç—Ä—É', 'success');
          } else {
            logDemo('‚ùå –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –ù–ï –ø–æ —Ü–µ–Ω—Ç—Ä—É', 'error');
          }
        }
        
        const dropdown = switcher.querySelector('.language-dropdown');
        if (dropdown) {
          const dropdownRect = dropdown.getBoundingClientRect();
          const switcherRect = switcher.getBoundingClientRect();
          
          const opensUp = dropdownRect.bottom < switcherRect.top;
          if (opensUp) {
            logDemo('‚úÖ Dropdown –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –≤–≥–æ—Ä—É', 'success');
          } else {
            logDemo('‚ùå Dropdown –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –≤–Ω–∏–∑', 'error');
          }
        }
        
        logDemo(`üìç –ü–æ–∑–∏—Ü—ñ—è: x=${Math.round(rect.left)}, y=${Math.round(rect.top)}`, 'info');
      } else {
        logDemo('‚ùå –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
      }
    }
    
    // –¢–µ—Å—Ç dropdown
    function toggleDropdown() {
      logDemo('üîΩ –¢–µ—Å—Ç—É—î–º–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è dropdown...', 'info');
      
      const switcher = document.getElementById('language-switcher');
      if (switcher) {
        const toggle = switcher.querySelector('.language-toggle');
        if (toggle) {
          toggle.click();
          logDemo('‚úÖ Dropdown –ø–µ—Ä–µ–º–∏–∫–∞—á –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ', 'success');
        } else {
          logDemo('‚ùå –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–º–∏–∫–∞—á–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞', 'error');
        }
      } else {
        logDemo('‚ùå –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
      }
    }
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    window.onload = async function() {
      logDemo('üöÄ –ó–∞–ø—É—Å–∫ –¥–µ–º–æ ProGran3 Language Switcher...', 'info');
      updateStatus('–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏...', 'warning');
      
      try {
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ I18nManager
        if (window.ProGran3 && window.ProGran3.I18n && window.ProGran3.I18n.Manager) {
          await window.ProGran3.I18n.Manager.init();
          logDemo('‚úÖ I18nManager —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ', 'success');
        }
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –ø–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤
        if (window.ProGran3 && window.ProGran3.UI && window.ProGran3.UI.LanguageSwitcher) {
          window.ProGran3.UI.LanguageSwitcher.init();
          logDemo('‚úÖ –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ', 'success');
        }
        
        updateStatus('–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ —Ä–æ–±–æ—Ç–∏', 'success');
        logDemo('üéâ –î–µ–º–æ –≥–æ—Ç–æ–≤–µ! –°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏ –º–æ–≤–∏', 'success');
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥–∏
        setTimeout(() => {
          testPositioning();
        }, 2000);
        
      } catch (error) {
        logDemo(`‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó: ${error.message}`, 'error');
        updateStatus('–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó', 'error');
      }
    };
  </script>
</body>
</html>
