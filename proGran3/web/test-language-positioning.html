<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Test Language Positioning</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f5f5f5;
    }
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .test-section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .test-button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    .test-button:hover {
      background: #0056b3;
    }
    .test-result {
      margin: 10px 0;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 3px;
      font-family: monospace;
      white-space: pre-wrap;
    }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    .warning { background: #fff3cd; color: #856404; }
    .info { background: #d1ecf1; color: #0c5460; }
    
    /* –°—Ç–∏–ª—ñ –¥–ª—è header (–∫–æ–ø—ñ—é—î–º–æ –∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª—É) */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      position: relative;
      z-index: 10;
      padding: 0 20px;
      flex-direction: row;
      min-height: 60px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .header-left {
      display: flex;
      align-items: center;
      flex: 0 0 auto;
      min-width: 120px;
    }
    
    .header-center {
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 1;
    }
    
    .header-center h1 {
      margin: 0;
      text-align: center;
    }
    
    .header-right {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      flex: 0 0 auto;
      min-width: 120px;
      padding-right: 20px; /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é */
    }
    
    .unit-switcher {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 12px;
      border-radius: 6px;
    }
    
    .unit-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .unit-toggle input[type="radio"] {
      display: none;
    }
    
    .unit-toggle label {
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: background 0.3s;
    }
    
    .unit-toggle label:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .unit-toggle input[type="radio"]:checked + label {
      background: rgba(255, 255, 255, 0.3);
    }
    
    /* –ú–æ–±—ñ–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ */
    @media (max-width: 480px) {
      header {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
      }
      
      .header-left,
      .header-right {
        width: 100%;
        justify-content: center;
        min-width: auto;
      }
      
      .header-center {
        order: -1;
      }
      
      .header-right {
        padding-right: 10px; /* –ó–º–µ–Ω—à—É—î–º–æ –≤—ñ–¥—Å—Ç—É–ø –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
      }
    }
    
    .viewport-info {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      font-family: monospace;
      font-size: 12px;
    }
    
    .positioning-demo {
      background: #e9ecef;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border: 2px dashed #6c757d;
    }
    
    .demo-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      position: relative;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>üîß Test Language Positioning</h1>
    
    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ viewport -->
    <div class="viewport-info">
      <strong>Viewport Info:</strong>
      <div id="viewport-info">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    </div>
    
    <!-- –¢–µ—Å—Ç–æ–≤–∏–π header –∑ –Ω–æ–≤–∏–º layout -->
    <header>
      <!-- –õ—ñ–≤–∏–π –≤–µ—Ä—Ö–Ω—ñ–π –∫—É—Ç - –≤–∏–±—ñ—Ä –æ–¥–∏–Ω–∏—Ü—å -->
      <div class="header-left">
        <div class="unit-switcher">
          <div class="unit-toggle">
            <input type="radio" id="unit-mm" name="unit" value="mm" checked>
            <input type="radio" id="unit-cm" name="unit" value="cm">
            <label for="unit-mm" class="unit-label">–º–º</label>
            <label for="unit-cm" class="unit-label">—Å–º</label>
          </div>
        </div>
      </div>
      
      <!-- –¶–µ–Ω—Ç—Ä - –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <div class="header-center">
        <h1>ProGran</h1>
      </div>
      
      <!-- –ü—Ä–∞–≤–∏–π –≤–µ—Ä—Ö–Ω—ñ–π –∫—É—Ç - –≤–∏–±—ñ—Ä –º–æ–≤–∏ -->
      <div class="header-right">
        <!-- –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –±—É–¥–µ –¥–æ–¥–∞–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
      </div>
    </header>
    
    <div class="test-section">
      <h2>1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–µ—Å—Ç –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è</h2>
      <div id="auto-test-result" class="test-result info">
        –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ç–µ—Å—Ç—É...
      </div>
    </div>
    
    <div class="test-section">
      <h2>2. –¢–µ—Å—Ç –≤—ñ–¥—Å—Ç—É–ø—ñ–≤ —Ç–∞ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è</h2>
      <button class="test-button" onclick="testPositioning()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è</button>
      <div id="positioning-test-result" class="test-result info">
        –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏...
      </div>
    </div>
    
    <div class="test-section">
      <h2>3. –¢–µ—Å—Ç dropdown –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è</h2>
      <button class="test-button" onclick="testDropdownPositioning()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ dropdown</button>
      <div id="dropdown-test-result" class="test-result info">
        –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è...
      </div>
    </div>
    
    <div class="test-section">
      <h2>4. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ –µ–∫—Ä–∞–Ω—É</h2>
      <div class="positioning-demo">
        <h3>üì± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä–∞—Ö:</h3>
        <button class="test-button" onclick="simulateViewport(1200)">–î–µ—Å–∫—Ç–æ–ø (1200px)</button>
        <button class="test-button" onclick="simulateViewport(768)">–ü–ª–∞–Ω—à–µ—Ç (768px)</button>
        <button class="test-button" onclick="simulateViewport(480)">–ú–æ–±—ñ–ª—å–Ω–∏–π (480px)</button>
        <button class="test-button" onclick="simulateViewport(320)">–ú–∞–ª–∏–π –º–æ–±—ñ–ª—å–Ω–∏–π (320px)</button>
        <div id="viewport-simulation-result" class="test-result info">
          –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è —Å–∏–º—É–ª—è—Ü—ñ—ó...
        </div>
      </div>
    </div>
    
    <div class="test-section">
      <h2>5. –ö–æ–Ω—Å–æ–ª—å–Ω—ñ –ª–æ–≥–∏</h2>
      <div id="console-logs" class="test-result" style="height: 200px; overflow-y: auto;">
        üîç –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–≤ –∑ –∫–æ–Ω—Å–æ–ª—ñ...
      </div>
    </div>
  </div>

  <!-- –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –º–æ–¥—É–ª—ñ -->
  <script src="modules/core/Logger.js"></script>
  <script src="modules/ui/LanguageSwitcher.js"></script>
  <script src="i18n/I18nManager.js"></script>
  
  <script>
    // –ü–µ—Ä–µ—Ö–æ–ø–ª—é—î–º–æ console.log –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ
    const originalLog = console.log;
    console.log = function(...args) {
      originalLog.apply(console, args);
      
      const logs = document.getElementById('console-logs');
      if (logs) {
        const timestamp = new Date().toLocaleTimeString();
        const message = args.map(arg => 
          typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
        ).join(' ');
        
        const logEntry = document.createElement('div');
        logEntry.textContent = `[${timestamp}] ${message}`;
        logEntry.style.marginBottom = '5px';
        logEntry.style.fontSize = '12px';
        logs.appendChild(logEntry);
        logs.scrollTop = logs.scrollHeight;
      }
    };
    
    // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ viewport
    function updateViewportInfo() {
      const viewportInfo = document.getElementById('viewport-info');
      if (viewportInfo) {
        viewportInfo.innerHTML = `
          Width: ${window.innerWidth}px<br>
          Height: ${window.innerHeight}px<br>
          Device Pixel Ratio: ${window.devicePixelRatio}<br>
          Media Query (max-width: 480px): ${window.matchMedia('(max-width: 480px)').matches ? '‚úÖ Active' : '‚ùå Inactive'}
        `;
      }
    }
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–µ—Å—Ç
    async function runAutoTest() {
      const result = document.getElementById('auto-test-result');
      
      try {
        // –û—á–∏—â—É—î–º–æ localStorage
        localStorage.removeItem('progran3_language');
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ I18nManager
        if (window.ProGran3 && window.ProGran3.I18n && window.ProGran3.I18n.Manager) {
          await window.ProGran3.I18n.Manager.init();
          
          // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ LanguageSwitcher
          if (window.ProGran3.UI && window.ProGran3.UI.LanguageSwitcher) {
            window.ProGran3.UI.LanguageSwitcher.init();
            
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            const header = document.querySelector('header');
            const headerRight = document.querySelector('.header-right');
            const languageSwitcher = document.querySelector('.language-switcher');
            const languageToggle = document.querySelector('.language-toggle');
            
            const headerStyles = getComputedStyle(header);
            const headerRightStyles = getComputedStyle(headerRight);
            
            const info = [
              `‚úÖ I18nManager —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ`,
              `‚úÖ LanguageSwitcher —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ`,
              ``,
              `üìç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ header:`,
              `  - header: ${header ? '–∑–Ω–∞–π–¥–µ–Ω–æ' : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
              `  - header-right: ${headerRight ? '–∑–Ω–∞–π–¥–µ–Ω–æ' : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
              `  - language-switcher: ${languageSwitcher ? '–∑–Ω–∞–π–¥–µ–Ω–æ' : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
              `  - language-toggle: ${languageToggle ? '–∑–Ω–∞–π–¥–µ–Ω–æ' : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
              ``,
              `üìç –°—Ç–∏–ª—ñ header-right:`,
              `  - padding-right: ${headerRightStyles.paddingRight}`,
              `  - justify-content: ${headerRightStyles.justifyContent}`,
              `  - min-width: ${headerRightStyles.minWidth}`,
              ``,
              `üìç –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è:`,
              `  - –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é: ${headerRightStyles.paddingRight}`,
              `  - –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –≤ –ø—Ä–∞–≤–æ–º—É –∫—É—Ç—ñ: ${headerRight && languageSwitcher ? '‚úÖ' : '‚ùå'}`,
              `  - –ü—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è: ${headerRightStyles.justifyContent === 'flex-end' ? '‚úÖ' : '‚ùå'}`
            ];
            
            const isSuccess = headerRight && languageSwitcher && languageToggle && 
                            headerRightStyles.paddingRight === '20px';
            result.textContent = info.join('\n');
            result.className = `test-result ${isSuccess ? 'success' : 'error'}`;
            
          } else {
            result.textContent = '‚ùå LanguageSwitcher –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π';
            result.className = 'test-result error';
          }
        } else {
          result.textContent = '‚ùå I18nManager –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π';
          result.className = 'test-result error';
        }
      } catch (error) {
        result.textContent = `‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`;
        result.className = 'test-result error';
      }
    }
    
    // –¢–µ—Å—Ç –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è
    function testPositioning() {
      const result = document.getElementById('positioning-test-result');
      
      try {
        const header = document.querySelector('header');
        const headerLeft = document.querySelector('.header-left');
        const headerCenter = document.querySelector('.header-center');
        const headerRight = document.querySelector('.header-right');
        const languageSwitcher = document.querySelector('.language-switcher');
        
        if (!header || !headerLeft || !headerCenter || !headerRight) {
          result.textContent = '‚ùå –ù–µ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ header –∑–Ω–∞–π–¥–µ–Ω–æ';
          result.className = 'test-result error';
          return;
        }
        
        const headerRect = header.getBoundingClientRect();
        const leftRect = headerLeft.getBoundingClientRect();
        const centerRect = headerCenter.getBoundingClientRect();
        const rightRect = headerRight.getBoundingClientRect();
        const switcherRect = languageSwitcher ? languageSwitcher.getBoundingClientRect() : null;
        
        const headerRightStyles = getComputedStyle(headerRight);
        
        const info = [
          `‚úÖ –í—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ header –∑–Ω–∞–π–¥–µ–Ω–æ`,
          ``,
          `üìè –ü–æ–∑–∏—Ü—ñ—ó –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:`,
          `  - header-left: x=${Math.round(leftRect.left)}, width=${Math.round(leftRect.width)}`,
          `  - header-center: x=${Math.round(centerRect.left)}, width=${Math.round(centerRect.width)}`,
          `  - header-right: x=${Math.round(rightRect.left)}, width=${Math.round(rightRect.width)}`,
          `  - language-switcher: ${switcherRect ? `x=${Math.round(switcherRect.left)}, width=${Math.round(switcherRect.width)}` : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
          ``,
          `üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è:`,
          `  - –í—ñ–¥—Å—Ç—É–ø header-right: ${headerRightStyles.paddingRight}`,
          `  - –í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é: ${Math.round(headerRect.right - rightRect.right)}px`,
          `  - –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ –≤ –ø—Ä–∞–≤–æ–º—É –∫—É—Ç—ñ: ${switcherRect ? '‚úÖ' : '‚ùå'}`,
          `  - –ü—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è: ${headerRightStyles.justifyContent === 'flex-end' ? '‚úÖ' : '‚ùå'}`,
          ``,
          `üìê –†–æ–∑–º—ñ—Ä–∏:`,
          `  - header-right min-width: ${headerRightStyles.minWidth}`,
          `  - header-right padding-right: ${headerRightStyles.paddingRight}`,
          `  - language-switcher: ${switcherRect ? `${Math.round(switcherRect.width)}px` : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`
        ];
        
        const isCorrect = headerRightStyles.paddingRight === '20px' && 
                         headerRightStyles.justifyContent === 'flex-end' &&
                         switcherRect;
        
        result.textContent = info.join('\n');
        result.className = `test-result ${isCorrect ? 'success' : 'warning'}`;
        
      } catch (error) {
        result.textContent = `‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`;
        result.className = 'test-result error';
      }
    }
    
    // –¢–µ—Å—Ç dropdown –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è
    function testDropdownPositioning() {
      const result = document.getElementById('dropdown-test-result');
      
      try {
        const languageSwitcher = document.querySelector('.language-switcher');
        const languageToggle = document.querySelector('.language-toggle');
        const languageDropdown = document.querySelector('.language-dropdown');
        
        if (!languageSwitcher || !languageToggle) {
          result.textContent = '‚ùå Language switcher –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';
          result.className = 'test-result error';
          return;
        }
        
        // –°–∏–º—É–ª—é—î–º–æ –∫–ª—ñ–∫ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è dropdown
        languageToggle.click();
        
        setTimeout(() => {
          const toggleRect = languageToggle.getBoundingClientRect();
          const dropdownRect = languageDropdown ? languageDropdown.getBoundingClientRect() : null;
          const viewportWidth = window.innerWidth;
          
          const dropdownStyles = languageDropdown ? getComputedStyle(languageDropdown) : null;
          
          const info = [
            `‚úÖ Language switcher –∑–Ω–∞–π–¥–µ–Ω–æ`,
            ``,
            `üìè –ü–æ–∑–∏—Ü—ñ—ó:`,
            `  - toggle: x=${Math.round(toggleRect.left)}, right=${Math.round(toggleRect.right)}`,
            `  - dropdown: ${dropdownRect ? `x=${Math.round(dropdownRect.left)}, right=${Math.round(dropdownRect.right)}` : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
            `  - viewport width: ${viewportWidth}px`,
            ``,
            `üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ dropdown:`,
            `  - Dropdown –≤—ñ–¥–∫—Ä–∏—Ç–æ: ${languageDropdown && languageDropdown.classList.contains('active') ? '‚úÖ' : '‚ùå'}`,
            `  - –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è: ${dropdownStyles ? dropdownStyles.right || dropdownStyles.left : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
            `  - –í–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –º–µ–∂—ñ: ${dropdownRect ? (dropdownRect.right > viewportWidth ? '‚ùå –¢–∞–∫' : '‚úÖ –ù—ñ') : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
            `  - –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —à–∏—Ä–∏–Ω–∞: ${dropdownStyles ? dropdownStyles.minWidth : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
            `  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —à–∏—Ä–∏–Ω–∞: ${dropdownStyles ? dropdownStyles.maxWidth : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'}`,
            ``,
            `üí° –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä –≤—ñ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞`
          ];
          
          const isCorrect = languageDropdown && 
                           languageDropdown.classList.contains('active') &&
                           dropdownRect && 
                           dropdownRect.right <= viewportWidth;
          
          result.textContent = info.join('\n');
          result.className = `test-result ${isCorrect ? 'success' : 'warning'}`;
          
          // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ dropdown
          if (languageToggle) {
            languageToggle.click();
          }
        }, 100);
        
      } catch (error) {
        result.textContent = `‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`;
        result.className = 'test-result error';
      }
    }
    
    // –°–∏–º—É–ª—è—Ü—ñ—è viewport
    function simulateViewport(width) {
      const result = document.getElementById('viewport-simulation-result');
      
      try {
        // –ó–º—ñ–Ω—é—î–º–æ —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Å–∏–º—É–ª—è—Ü—ñ—ó
        const container = document.querySelector('.test-container');
        const originalWidth = container.style.maxWidth;
        container.style.maxWidth = `${width}px`;
        
        // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
        updateViewportInfo();
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å—Ç–∏–ª—ñ
        const header = document.querySelector('header');
        const headerRight = document.querySelector('.header-right');
        const languageSwitcher = document.querySelector('.language-switcher');
        
        const headerStyles = getComputedStyle(header);
        const headerRightStyles = getComputedStyle(headerRight);
        
        const info = [
          `üì± –°–∏–º—É–ª—è—Ü—ñ—è viewport: ${width}px`,
          ``,
          `üìç –°—Ç–∏–ª—ñ header:`,
          `  - flex-direction: ${headerStyles.flexDirection}`,
          `  - padding: ${headerStyles.padding}`,
          ``,
          `üìç –°—Ç–∏–ª—ñ header-right:`,
          `  - padding-right: ${headerRightStyles.paddingRight}`,
          `  - justify-content: ${headerRightStyles.justifyContent}`,
          `  - min-width: ${headerRightStyles.minWidth}`,
          ``,
          `üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:`,
          `  - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π layout: ${headerStyles.flexDirection === 'row' ? '‚úÖ' : '‚ùå'}`,
          `  - –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤—ñ–¥—Å—Ç—É–ø: ${headerRightStyles.paddingRight === (width <= 480 ? '10px' : '20px') ? '‚úÖ' : '‚ùå'}`,
          `  - Language switcher: ${languageSwitcher ? '‚úÖ' : '‚ùå'}`,
          ``,
          `üí° –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä: ${originalWidth || '1200px'}`
        ];
        
        const isCorrect = (width > 480 && headerStyles.flexDirection === 'row') ||
                         (width <= 480 && headerStyles.flexDirection === 'column');
        
        result.textContent = info.join('\n');
        result.className = `test-result ${isCorrect ? 'success' : 'warning'}`;
        
        // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É —à–∏—Ä–∏–Ω—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥–∏
        setTimeout(() => {
          container.style.maxWidth = originalWidth;
          updateViewportInfo();
        }, 3000);
        
      } catch (error) {
        result.textContent = `‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`;
        result.className = 'test-result error';
      }
    }
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    window.onload = async function() {
      console.log('üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—É –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –º–æ–≤...');
      
      // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ viewport
      updateViewportInfo();
      
      // –ó–∞–ø—É—Å–∫–∞—î–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–µ—Å—Ç
      await runAutoTest();
      
      // –ó–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—à—ñ —Ç–µ—Å—Ç–∏
      setTimeout(testPositioning, 1000);
      
      console.log('‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–æ');
    };
    
    // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ viewport –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ä–æ–∑–º—ñ—Ä—É
    window.addEventListener('resize', updateViewportInfo);
  </script>
</body>
</html>
