<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProGran3 - –¢–µ—Å—Ç –º–æ–¥—É–ª—ñ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 4px solid #ccc;
        }
        .test-result.pass {
            background-color: #d4edda;
            border-left-color: #28a745;
        }
        .test-result.fail {
            background-color: #f8d7da;
            border-left-color: #dc3545;
        }
        .test-result.info {
            background-color: #d1ecf1;
            border-left-color: #17a2b8;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ –¢–µ—Å—Ç –º–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü—ñ—ó ProGran3</h1>
        <p>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ —Ä–æ–±–æ—Ç–∏ –º–æ–¥—É–ª—ñ–≤</p>
        
        <div id="test-results"></div>
        
        <button onclick="runTests()" style="
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        ">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏</button>
    </div>

    <!-- –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –º–æ–¥—É–ª—ñ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É -->
    <script src="modules/core/Config.js"></script>
    <script src="modules/core/Logger.js"></script>
    <script src="modules/core/StateManager.js"></script>
    <script src="modules/utils/Helpers.js"></script>
    <script src="modules/utils/Validation.js"></script>
    <script src="modules/utils/Units.js"></script>
    <script src="modules/communication/SketchUpBridge.js"></script>
    <script src="modules/ui/Tabs.js"></script>
    <script src="modules/ui/Panels.js"></script>
    <script src="modules/builders/FoundationBuilder.js"></script>

    <script>
        function addTestResult(message, type = 'info') {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }

        function runTests() {
            const results = document.getElementById('test-results');
            results.innerHTML = '';
            
            addTestResult('üöÄ –ü–æ—á–∞—Ç–æ–∫ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤...', 'info');
            
            // –¢–µ—Å—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ namespace
            try {
                if (window.ProGran3) {
                    addTestResult('‚úÖ Namespace ProGran3 —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'pass');
                } else {
                    addTestResult('‚ùå Namespace ProGran3 –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'fail');
                    return;
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ namespace: ${error.message}`, 'fail');
                return;
            }
            
            // –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Core –º–æ–¥—É–ª—ñ–≤
            try {
                if (window.ProGran3.Core) {
                    addTestResult('‚úÖ Core namespace —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'pass');
                    
                    if (window.ProGran3.Core.Logger) {
                        addTestResult('‚úÖ Logger –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Logger –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                    
                    if (window.ProGran3.Core.StateManager) {
                        addTestResult('‚úÖ StateManager –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå StateManager –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                    
                    if (window.ProGran3.Core.Config) {
                        addTestResult('‚úÖ Config –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Config –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                } else {
                    addTestResult('‚ùå Core namespace –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'fail');
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ Core –º–æ–¥—É–ª—ñ–≤: ${error.message}`, 'fail');
            }
            
            // –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Utils –º–æ–¥—É–ª—ñ–≤
            try {
                if (window.ProGran3.Utils) {
                    addTestResult('‚úÖ Utils namespace —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'pass');
                    
                    if (window.ProGran3.Utils.Validation) {
                        addTestResult('‚úÖ Validation –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Validation –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                    
                    if (window.ProGran3.Utils.Units) {
                        addTestResult('‚úÖ Units –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Units –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                    
                    if (window.ProGran3.Utils.Helpers) {
                        addTestResult('‚úÖ Helpers –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Helpers –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                } else {
                    addTestResult('‚ùå Utils namespace –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'fail');
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ Utils –º–æ–¥—É–ª—ñ–≤: ${error.message}`, 'fail');
            }
            
            // –¢–µ—Å—Ç 4: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ UI –º–æ–¥—É–ª—ñ–≤
            try {
                if (window.ProGran3.UI) {
                    addTestResult('‚úÖ UI namespace —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'pass');
                    
                    if (window.ProGran3.UI.Tabs) {
                        addTestResult('‚úÖ Tabs –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Tabs –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                    
                    if (window.ProGran3.UI.Panels) {
                        addTestResult('‚úÖ Panels –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå Panels –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                } else {
                    addTestResult('‚ùå UI namespace –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'fail');
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ UI –º–æ–¥—É–ª—ñ–≤: ${error.message}`, 'fail');
            }
            
            // –¢–µ—Å—Ç 5: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Builder –º–æ–¥—É–ª—ñ–≤
            try {
                if (window.ProGran3.Builders) {
                    addTestResult('‚úÖ Builders namespace —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'pass');
                    
                    if (window.ProGran3.Builders.FoundationBuilder) {
                        addTestResult('‚úÖ FoundationBuilder –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå FoundationBuilder –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                } else {
                    addTestResult('‚ùå Builders namespace –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'fail');
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ Builder –º–æ–¥—É–ª—ñ–≤: ${error.message}`, 'fail');
            }
            
            // –¢–µ—Å—Ç 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Communication –º–æ–¥—É–ª—ñ–≤
            try {
                if (window.ProGran3.Communication) {
                    addTestResult('‚úÖ Communication namespace —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'pass');
                    
                    if (window.ProGran3.Communication.SketchUpBridge) {
                        addTestResult('‚úÖ SketchUpBridge –º–æ–¥—É–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'pass');
                    } else {
                        addTestResult('‚ùå SketchUpBridge –º–æ–¥—É–ª—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ', 'fail');
                    }
                } else {
                    addTestResult('‚ùå Communication namespace –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ', 'fail');
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ Communication –º–æ–¥—É–ª—ñ–≤: ${error.message}`, 'fail');
            }
            
            // –¢–µ—Å—Ç 7: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
            try {
                const globalFunctions = [
                    'debugLog', 'clearDebugLog', 'changeUnit', 'getCurrentUnit',
                    'formatValue', 'convertValue', 'addFoundation'
                ];
                
                let allGlobalFunctionsAvailable = true;
                globalFunctions.forEach(funcName => {
                    if (typeof window[funcName] === 'function') {
                        addTestResult(`‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è ${funcName} –¥–æ—Å—Ç—É–ø–Ω–∞`, 'pass');
                    } else {
                        addTestResult(`‚ùå –ì–ª–æ–±–∞–ª—å–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è ${funcName} –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞`, 'fail');
                        allGlobalFunctionsAvailable = false;
                    }
                });
                
                if (allGlobalFunctionsAvailable) {
                    addTestResult('‚úÖ –í—Å—ñ –≥–ª–æ–±–∞–ª—å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω—ñ (–∑–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å)', 'pass');
                }
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–≤–æ—Ä–æ—Ç–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ: ${error.message}`, 'fail');
            }
            
            // –¢–µ—Å—Ç 8: –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
            try {
                // –¢–µ—Å—Ç—É—î–º–æ Logger
                if (window.ProGran3.Core.Logger) {
                    window.ProGran3.Core.Logger.debugLog('–¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è', 'info');
                    addTestResult('‚úÖ Logger —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î', 'pass');
                }
                
                // –¢–µ—Å—Ç—É—î–º–æ StateManager
                if (window.ProGran3.Core.StateManager) {
                    const originalTab = window.ProGran3.Core.StateManager.getActiveTab();
                    window.ProGran3.Core.StateManager.setActiveTab('test');
                    const currentTab = window.ProGran3.Core.StateManager.getActiveTab();
                    window.ProGran3.Core.StateManager.setActiveTab(originalTab);
                    
                    if (currentTab === 'test') {
                        addTestResult('‚úÖ StateManager —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î', 'pass');
                    } else {
                        addTestResult('‚ùå StateManager –Ω–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ', 'fail');
                    }
                }
                
                // –¢–µ—Å—Ç—É—î–º–æ Validation
                if (window.ProGran3.Utils.Validation) {
                    const result = window.ProGran3.Utils.Validation.validateDimension('100');
                    if (result.isValid && result.value === 100) {
                        addTestResult('‚úÖ Validation —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î', 'pass');
                    } else {
                        addTestResult('‚ùå Validation –Ω–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ', 'fail');
                    }
                }
                
                // –¢–µ—Å—Ç—É—î–º–æ Units
                if (window.ProGran3.Utils.Units) {
                    const originalUnit = window.ProGran3.Utils.Units.getCurrentUnit();
                    window.ProGran3.Utils.Units.changeUnit('cm');
                    const currentUnit = window.ProGran3.Utils.Units.getCurrentUnit();
                    window.ProGran3.Utils.Units.changeUnit(originalUnit);
                    
                    if (currentUnit === 'cm') {
                        addTestResult('‚úÖ Units —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î', 'pass');
                    } else {
                        addTestResult('‚ùå Units –Ω–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ', 'fail');
                    }
                }
                
            } catch (error) {
                addTestResult(`‚ùå –ü–æ–º–∏–ª–∫–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è: ${error.message}`, 'fail');
            }
            
            addTestResult('üèÅ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!', 'info');
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç–µ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', () => {
            setTimeout(runTests, 500);
        });
    </script>
</body>
</html>
